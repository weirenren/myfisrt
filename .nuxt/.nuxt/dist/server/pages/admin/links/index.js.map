{"version":3,"file":"pages/admin/links/index.js","sources":["webpack:///./pages/admin/links/index.vue?a3d3","webpack:///./pages/admin/links/index.vue?7637","webpack:///./pages/admin/links/index.vue","webpack:///./pages/admin/links/index.vue?c57a","webpack:///./pages/admin/links/index.vue?012b","webpack:///./assets/images/net.png","webpack:///./pages/admin/links/index.vue?3975"],"sourcesContent":["import mod from \"-!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--3-oneOf-1-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--3-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=77d83ef1&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--3-oneOf-1-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--3-oneOf-1-1!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=77d83ef1&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"page-container\"},[_vm._ssrNode(\"<div class=\\\"toolbar\\\" data-v-77d83ef1>\",\"</div>\",[_c('el-form',{attrs:{\"inline\":true,\"model\":_vm.filters}},[_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":\"标题\"},model:{value:(_vm.filters.title),callback:function ($$v) {_vm.$set(_vm.filters, \"title\", $$v)},expression:\"filters.title\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":\"链接\"},model:{value:(_vm.filters.url),callback:function ($$v) {_vm.$set(_vm.filters, \"url\", $$v)},expression:\"filters.url\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择状态\"},on:{\"change\":_vm.list},model:{value:(_vm.filters.status),callback:function ($$v) {_vm.$set(_vm.filters, \"status\", $$v)},expression:\"filters.status\"}},[_c('el-option',{attrs:{\"label\":\"正常\",\"value\":\"0\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"删除\",\"value\":\"1\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.list}},[_vm._v(\"查询\")])],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\"新增\")])],1)],1)],1),_vm._ssrNode(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.results,\"highlight-current-row\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"编号\",\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"title\",\"label\":\"标题\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"url\",\"label\":\"链接\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('a',{attrs:{\"href\":scope.row.url,\"target\":\"_blank\"}},[_vm._v(_vm._s(scope.row.url))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"logo\",\"label\":\"Logo\",\"width\":\"60\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.logo)?_c('img',{staticClass:\"link-logo\",attrs:{\"src\":scope.row.logo}}):_c('img',{staticClass:\"link-logo\",attrs:{\"src\":require(\"assets/images/net.png\")}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"summary\",\"label\":\"描述\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"状态\",\"width\":\"50\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.status === 0 ? '正常' : '删除')+\"\\n      \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"创建时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm._f(\"formatDate\")(scope.row.createTime))+\"\\n      \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleEdit(scope.$index, scope.row)}}},[_vm._v(\"编辑\\n        \")])]}}])})],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"pagebar\\\" data-v-77d83ef1>\",\"</div>\",[_c('el-pagination',{attrs:{\"page-sizes\":[20, 50, 100, 300],\"current-page\":_vm.page.page,\"page-size\":_vm.page.limit,\"total\":_vm.page.total,\"layout\":\"total, sizes, prev, pager, next, jumper\"},on:{\"current-change\":_vm.handlePageChange,\"size-change\":_vm.handleLimitChange}})],1),_vm._ssrNode(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.addFormVisible,\"close-on-click-modal\":false,\"title\":\"新增\"},on:{\"update:visible\":function($event){_vm.addFormVisible=$event}}},[_c('el-form',{ref:\"addForm\",attrs:{\"model\":_vm.addForm,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"链接\"}},[_c('el-input',{staticStyle:{\"width\":\"80%\"},model:{value:(_vm.addForm.url),callback:function ($$v) {_vm.$set(_vm.addForm, \"url\", $$v)},expression:\"addForm.url\"}}),_vm._v(\" \\n        \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.detect}},[_vm._v(\"Detect\")])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"标题\"}},[_c('el-input',{model:{value:(_vm.addForm.title),callback:function ($$v) {_vm.$set(_vm.addForm, \"title\", $$v)},expression:\"addForm.title\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"描述\"}},[_c('el-input',{attrs:{\"autosize\":{ minRows: 2, maxRows: 4 }},model:{value:(_vm.addForm.summary),callback:function ($$v) {_vm.$set(_vm.addForm, \"summary\", $$v)},expression:\"addForm.summary\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Logo\"}},[_c('el-input',{model:{value:(_vm.addForm.logo),callback:function ($$v) {_vm.$set(_vm.addForm, \"logo\", $$v)},expression:\"addForm.logo\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{nativeOn:{\"click\":function($event){_vm.addFormVisible = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"loading\":_vm.addLoading,\"type\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.addSubmit($event)}}},[_vm._v(\"提交\\n      \")])],1)],1),_vm._ssrNode(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.editFormVisible,\"close-on-click-modal\":false,\"title\":\"编辑\"},on:{\"update:visible\":function($event){_vm.editFormVisible=$event}}},[_c('el-form',{ref:\"editForm\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.editFormRules,\"label-width\":\"80px\"}},[_c('el-input',{attrs:{\"type\":\"hidden\"},model:{value:(_vm.editForm.id),callback:function ($$v) {_vm.$set(_vm.editForm, \"id\", $$v)},expression:\"editForm.id\"}}),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"链接\"}},[_c('el-input',{model:{value:(_vm.editForm.url),callback:function ($$v) {_vm.$set(_vm.editForm, \"url\", $$v)},expression:\"editForm.url\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"标题\"}},[_c('el-input',{model:{value:(_vm.editForm.title),callback:function ($$v) {_vm.$set(_vm.editForm, \"title\", $$v)},expression:\"editForm.title\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"描述\"}},[_c('el-input',{attrs:{\"autosize\":{ minRows: 2, maxRows: 4 }},model:{value:(_vm.editForm.summary),callback:function ($$v) {_vm.$set(_vm.editForm, \"summary\", $$v)},expression:\"editForm.summary\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Logo\"}},[_c('el-input',{model:{value:(_vm.editForm.logo),callback:function ($$v) {_vm.$set(_vm.editForm, \"logo\", $$v)},expression:\"editForm.logo\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"状态\",\"prop\":\"status\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.editForm.status),callback:function ($$v) {_vm.$set(_vm.editForm, \"status\", $$v)},expression:\"editForm.status\"}},[_c('el-option',{key:0,attrs:{\"value\":0,\"label\":\"正常\"}}),_vm._v(\" \"),_c('el-option',{key:1,attrs:{\"value\":1,\"label\":\"删除\"}})],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{nativeOn:{\"click\":function($event){_vm.editFormVisible = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"loading\":_vm.editLoading,\"type\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.editSubmit($event)}}},[_vm._v(\"提交\\n      \")])],1)],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  layout: 'admin',\n  data() {\n    return {\n      results: [],\n      listLoading: false,\n      page: {},\n      filters: {},\n\n      addForm: {},\n      addFormVisible: false,\n      addFormRules: {},\n      addLoading: false,\n\n      editForm: {},\n      editFormVisible: false,\n      editFormRules: {},\n      editLoading: false\n    }\n  },\n  mounted() {\n    this.list()\n  },\n  methods: {\n    list() {\n      const me = this\n      me.listLoading = true\n      const params = Object.assign(me.filters, {\n        page: me.page.page,\n        limit: me.page.limit\n      })\n      this.$axios\n        .post('/api/admin/link/list', params)\n        .then((data) => {\n          me.results = data.results\n          me.page = data.page\n        })\n        .finally(() => {\n          me.listLoading = false\n        })\n    },\n    handlePageChange(val) {\n      this.page.page = val\n      this.list()\n    },\n    handleLimitChange(val) {\n      this.page.limit = val\n      this.list()\n    },\n    handleAdd() {\n      this.addForm = {}\n      this.addFormVisible = true\n    },\n    addSubmit() {\n      const me = this\n      this.$axios\n        .post('/api/admin/link/create', this.addForm)\n        .then((data) => {\n          me.$message({ message: '提交成功', type: 'success' })\n          me.addFormVisible = false\n          me.list()\n        })\n        .catch((rsp) => {\n          me.$notify.error({ title: '错误', message: rsp.message })\n        })\n    },\n    async detect() {\n      if (!this.addForm.url) {\n        return\n      }\n      try {\n        const flag = await this.$confirm(\n          '确定采集吗，采集之后将覆盖现有内容?',\n          '提示',\n          { type: 'warning' }\n        )\n        if (flag) {\n          const data = await this.$axios.get('/api/admin/link/detect', {\n            url: this.addForm.url\n          })\n          if (data) {\n            this.addForm.title = data.title\n            this.addForm.summary = data.description\n          }\n        }\n      } catch (e) {\n        this.$notify.error({ title: '错误', message: e.message || e })\n      }\n    },\n    handleEdit(index, row) {\n      const me = this\n      this.$axios\n        .get(`/api/admin/link/${row.id}`)\n        .then((data) => {\n          me.editForm = Object.assign({}, data)\n          me.editFormVisible = true\n        })\n        .catch((rsp) => {\n          me.$notify.error({ title: '错误', message: rsp.message })\n        })\n    },\n    editSubmit() {\n      const me = this\n      this.$axios\n        .post('/api/admin/link/update', me.editForm)\n        .then((data) => {\n          me.list()\n          me.editFormVisible = false\n        })\n        .catch((rsp) => {\n          me.$notify.error({ title: '错误', message: rsp.message })\n        })\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=77d83ef1&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.vue?vue&type=style&index=0&id=77d83ef1&scoped=true&lang=css&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"77d83ef1\",\n  \"2bcac6dd\"\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/net.1e01d6d.png\";","// Exports\nmodule.exports = {};\n"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAdA;AAgBA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAGA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAGA;AAAA;AACA;AACA;AACA;AACA;AADA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AA1FA;AAvBA;;ACpKA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvBA;;;;;;;ACAA;AACA;;;;;A","sourceRoot":""}
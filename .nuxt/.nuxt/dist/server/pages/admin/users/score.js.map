{"version":3,"file":"pages/admin/users/score.js","sources":["webpack:///./pages/admin/components/UserInfo.vue?e277","webpack:///./pages/admin/components/UserInfo.vue","webpack:///./pages/admin/components/UserInfo.vue?a1ed","webpack:///./pages/admin/components/UserInfo.vue?6552","webpack:///./pages/admin/users/score-log.vue?dfd4","webpack:///./pages/admin/users/score-log.vue","webpack:///./pages/admin/users/score-log.vue?631d","webpack:///./pages/admin/users/score-log.vue?1422","webpack:///./pages/admin/users/score.vue?9781","webpack:///./pages/admin/users/score.vue","webpack:///./pages/admin/users/score.vue?9104","webpack:///./pages/admin/users/score.vue?aad8","webpack:///./pages/admin/components/UserInfo.vue?d313","webpack:///./pages/admin/components/UserInfo.vue?771d"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-info-component\"},[_vm._ssrNode(\"<img\"+(_vm._ssrAttr(\"src\",_vm.user.smallAvatar))+\" class=\\\"avatar\\\" data-v-7228314a> <div class=\\\"user-info-component-right\\\" data-v-7228314a><div data-v-7228314a>\"+_vm._ssrEscape(_vm._s(_vm.user.id))+\"</div> <span data-v-7228314a>\"+_vm._ssrEscape(_vm._s(_vm.user.nickname))+\"</span></div>\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  props: {\n    user: {\n      type: Object,\n      required: true,\n      default() {\n        return null\n      }\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./UserInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./UserInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserInfo.vue?vue&type=template&id=7228314a&scoped=true&\"\nimport script from \"./UserInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./UserInfo.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./UserInfo.vue?vue&type=style&index=0&id=7228314a&lang=scss&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"7228314a\",\n  \"4d6665f3\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isShowLog)?_c('el-dialog',{attrs:{\"visible\":_vm.isShowLog,\"width\":\"80%\",\"title\":\"积分记录\"},on:{\"update:visible\":function($event){_vm.isShowLog=$event}}},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],attrs:{\"data\":_vm.results,\"highlight-current-row\":\"\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"编号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"sourceType\",\"label\":\"来源类型\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"sourceId\",\"label\":\"来源编号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"description\",\"label\":\"描述\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"type\",\"label\":\"类型\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(scope.row.type === 0 ? '增加' : '减少'))]}}],null,false,569092045)}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"score\",\"label\":\"积分\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"创建时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm._f(\"formatDate\")(scope.row.createTime)))]}}],null,false,1255221282)})],1),_vm._v(\" \"),_c('div',{staticClass:\"pagebar\"},[_c('el-pagination',{attrs:{\"page-sizes\":[20, 50, 100, 300],\"current-page\":_vm.page.page,\"page-size\":_vm.page.limit,\"total\":_vm.page.total,\"layout\":\"total, sizes, prev, pager, next, jumper\"},on:{\"current-change\":_vm.handlePageChange,\"size-change\":_vm.handleLimitChange}})],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  data() {\n    return {\n      isShowLog: false,\n      userId: 0,\n      results: [],\n      listLoading: false,\n      page: {},\n      filters: {}\n    }\n  },\n  mounted() {},\n  methods: {\n    async showLog(userId) {\n      this.userId = userId\n      this.isShowLog = true\n      await this.list()\n    },\n    async list() {\n      this.listLoading = true\n      const params = Object.assign(this.filters, {\n        page: this.page.page,\n        limit: this.page.limit\n      })\n      params.userId = this.userId\n      try {\n        const data = await this.$axios.post(\n          '/api/admin/user-score-log/list',\n          params\n        )\n        this.results = data.results\n        this.page = data.page\n      } catch (err) {\n        this.$notify.error({ title: '错误', message: err.message || err })\n      } finally {\n        this.listLoading = false\n      }\n    },\n    handlePageChange(val) {\n      this.page.page = val\n      this.list()\n    },\n    handleLimitChange(val) {\n      this.page.limit = val\n      this.list()\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./score-log.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./score-log.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./score-log.vue?vue&type=template&id=2990df6b&scoped=true&\"\nimport script from \"./score-log.vue?vue&type=script&lang=js&\"\nexport * from \"./score-log.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"2990df6b\",\n  \"a63982ba\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"page-container\"},[_vm._ssrNode(\"<div class=\\\"toolbar\\\" data-v-507d8fc0>\",\"</div>\",[_c('el-form',{attrs:{\"inline\":true,\"model\":_vm.filters}},[_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":\"用户编号\"},model:{value:(_vm.filters.userId),callback:function ($$v) {_vm.$set(_vm.filters, \"userId\", $$v)},expression:\"filters.userId\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.list}},[_vm._v(\"查询\")])],1)],1)],1),_vm._ssrNode(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.results,\"highlight-current-row\":\"\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"编号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"userId\",\"label\":\"用户\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('user-info',{attrs:{\"user\":scope.row.user}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"score\",\"label\":\"积分\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"createTime\",\"label\":\"创建时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm._f(\"formatDate\")(scope.row.createTime)))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"updateTime\",\"label\":\"更新时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm._f(\"formatDate\")(scope.row.updateTime)))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.showLog(scope.$index, scope.row)}}},[_vm._v(\"积分记录\")])]}}])})],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"pagebar\\\" data-v-507d8fc0>\",\"</div>\",[_c('el-pagination',{attrs:{\"page-sizes\":[20, 50, 100, 300],\"current-page\":_vm.page.page,\"page-size\":_vm.page.limit,\"total\":_vm.page.total,\"layout\":\"total, sizes, prev, pager, next, jumper\"},on:{\"current-change\":_vm.handlePageChange,\"size-change\":_vm.handleLimitChange}})],1),_vm._ssrNode(\" \"),_c('score-log',{ref:\"scoreLog\"})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport ScoreLog from './score-log'\nimport UserInfo from '~/pages/admin/components/UserInfo'\nexport default {\n  layout: 'admin',\n  components: { ScoreLog, UserInfo },\n  data() {\n    return {\n      results: [],\n      scoreLogs: [],\n      listLoading: false,\n      page: {},\n      filters: {},\n      isShowLog: false\n    }\n  },\n  mounted() {\n    this.list()\n  },\n  methods: {\n    list() {\n      const me = this\n      me.listLoading = true\n      const params = Object.assign(me.filters, {\n        page: me.page.page,\n        limit: me.page.limit\n      })\n      this.$axios\n        .post('/api/admin/user-score/list', params)\n        .then((data) => {\n          me.results = data.results\n          me.page = data.page\n        })\n        .finally(() => {\n          me.listLoading = false\n        })\n    },\n    showLog(index, row) {\n      this.$refs.scoreLog.showLog(row.userId)\n    },\n    handlePageChange(val) {\n      this.page.page = val\n      this.list()\n    },\n    handleLimitChange(val) {\n      this.page.limit = val\n      this.list()\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./score.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./score.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./score.vue?vue&type=template&id=507d8fc0&scoped=true&\"\nimport script from \"./score.vue?vue&type=script&lang=js&\"\nexport * from \"./score.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"507d8fc0\",\n  \"ad1a37a8\"\n  \n)\n\nexport default component.exports","// Exports\nmodule.exports = {};\n","import mod from \"-!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./UserInfo.vue?vue&type=style&index=0&id=7228314a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./UserInfo.vue?vue&type=style&index=0&id=7228314a&lang=scss&scoped=true&\""],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AANA;AADA;AADA;;ACXA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvBA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AAIA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAlCA;AAZA;;AC/CA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACrBA;AACA;AACA;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAGA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AA7BA;AAhBA;;ACrEA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrBA;AACA;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}
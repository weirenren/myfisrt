{"version":3,"file":"pages/article/create.js","sources":["webpack:///./pages/article/create.vue?3e9d","webpack:///./pages/article/create.vue","webpack:///./pages/article/create.vue?e46e","webpack:///./pages/article/create.vue?ac4f","webpack:///./common/utils.js","webpack:///./components/TagInput.vue?ac0b","webpack:///./components/MarkdownHelp.vue?ba7d","webpack:///./components/TagInput.vue?7317","webpack:///./components/TagInput.vue?b9ea","webpack:///./components/TagInput.vue","webpack:///./components/TagInput.vue?b687","webpack:///./components/TagInput.vue?2d40","webpack:///./components/MarkdownHelp.vue?3988","webpack:///./components/MarkdownHelp.vue?d9f5","webpack:///./components/MarkdownHelp.vue","webpack:///./components/MarkdownHelp.vue?0bf1","webpack:///./components/MarkdownHelp.vue?25cc","webpack:///./components/MarkdownEditor.vue?7b0d","webpack:///./components/MarkdownEditor.vue","webpack:///./components/MarkdownEditor.vue?a0a9","webpack:///./components/MarkdownEditor.vue?c19f"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"main\"},[_vm._ssrNode(\"<div class=\\\"container main-container is-white left-main\\\" data-v-a7f6944e>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"left-container\\\" data-v-a7f6944e>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"widget\\\" data-v-a7f6944e>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"widget-header\\\" data-v-a7f6944e><nav class=\\\"breadcrumb\\\" data-v-a7f6944e><ul data-v-a7f6944e><li data-v-a7f6944e><a href=\\\"/\\\" data-v-a7f6944e>首页</a></li> <li data-v-a7f6944e><a\"+(_vm._ssrAttr(\"href\",'/user/' + _vm.user.id + '?tab=articles'))+\" data-v-a7f6944e>\"+_vm._ssrEscape(_vm._s(_vm.user.nickname))+\"</a></li> <li class=\\\"is-active\\\" data-v-a7f6944e><a href=\\\"#\\\" aria-current=\\\"page\\\" data-v-a7f6944e>文章</a></li></ul></nav></div> \"),_vm._ssrNode(\"<div class=\\\"widget-content\\\" data-v-a7f6944e>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"field\\\" data-v-a7f6944e><div class=\\\"control\\\" data-v-a7f6944e><input type=\\\"text\\\" placeholder=\\\"标题\\\"\"+(_vm._ssrAttr(\"value\",(_vm.postForm.title)))+\" class=\\\"input\\\" data-v-a7f6944e></div></div> \"),_vm._ssrNode(\"<div class=\\\"field\\\" data-v-a7f6944e>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"control\\\" data-v-a7f6944e>\",\"</div>\",[_c('markdown-editor',{ref:\"mdEditor\",attrs:{\"editor-id\":\"articleCreateEditor\",\"placeholder\":\"请输入内容，将图片复制或拖入编辑器可上传\"},model:{value:(_vm.postForm.content),callback:function ($$v) {_vm.$set(_vm.postForm, \"content\", $$v)},expression:\"postForm.content\"}})],1)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"field\\\" data-v-a7f6944e>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"control\\\" data-v-a7f6944e>\",\"</div>\",[_c('tag-input',{model:{value:(_vm.postForm.tags),callback:function ($$v) {_vm.$set(_vm.postForm, \"tags\", $$v)},expression:\"postForm.tags\"}})],1)]),_vm._ssrNode(\" <div class=\\\"field is-grouped\\\" data-v-a7f6944e><div class=\\\"control\\\" data-v-a7f6944e><a\"+(_vm._ssrAttr(\"disabled\",_vm.publishing))+(_vm._ssrClass(\"button is-success\",{ 'is-loading': _vm.publishing }))+\" data-v-a7f6944e>发表</a></div></div>\")],2)],2)]),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"right-container\\\" data-v-a7f6944e>\",\"</div>\",[_c('markdown-help')],1)],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport utils from '~/common/utils'\nimport TagInput from '~/components/TagInput'\nimport MarkdownHelp from '~/components/MarkdownHelp'\nimport MarkdownEditor from '~/components/MarkdownEditor'\n\nexport default {\n  middleware: 'authenticated',\n  components: {\n    TagInput,\n    MarkdownHelp,\n    MarkdownEditor\n  },\n  data() {\n    return {\n      publishing: false, // 当前是否正处于发布中...\n      postForm: {\n        title: '',\n        tags: [],\n        content: ''\n      }\n    }\n  },\n  computed: {\n    user() {\n      return this.$store.state.user.current\n    }\n  },\n  mounted() {},\n  methods: {\n    async submitCreate() {\n      const me = this\n      if (me.publishing) {\n        return\n      }\n      me.publishing = true\n      try {\n        const article = await this.$axios.post('/api/article/create', {\n          title: me.postForm.title,\n          content: me.postForm.content,\n          tags: me.postForm.tags ? me.postForm.tags.join(',') : ''\n        })\n        this.$refs.mdEditor.clearCache()\n        this.$toast.success('提交成功', {\n          duration: 1000,\n          onComplete() {\n            utils.linkTo('/article/' + article.articleId)\n          }\n        })\n      } catch (e) {\n        me.publishing = false\n        this.$toast.error('提交失败：' + (e.message || e))\n      }\n    }\n  },\n  head() {\n    return {\n      title: this.$siteTitle('发表文章')\n    }\n  }\n}\n","import mod from \"-!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./create.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./create.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./create.vue?vue&type=template&id=a7f6944e&scoped=true&\"\nimport script from \"./create.vue?vue&type=script&lang=js&\"\nexport * from \"./create.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"a7f6944e\",\n  \"3ca53238\"\n  \n)\n\nexport default component.exports","import Cookies from 'js-cookie'\nclass Utils {\n  getCity() {\n    const city = Cookies.get('city')\n    if (city) {\n      return city\n    }\n    return '北京'\n  }\n\n  setCity(city) {\n    return Cookies.set('city', city)\n  }\n\n  linkTo(path) {\n    window.location = path\n    // 这里使用$router.push会导致跳转页面之后window.vditor对象undefined，原因未知\n    // window.$nuxt.$router.push(path)\n  }\n\n  toSignin(ref) {\n    if (!ref && process.client) {\n      // 如果没配置refUrl，那么取当前地址\n      ref = window.location.pathname\n    }\n    this.linkTo('/user/signin?ref=' + encodeURIComponent(ref))\n  }\n\n  isSigninUrl(ref) {\n    return ref === '/user/signin'\n  }\n\n  isArray(sources) {\n    return Object.prototype.toString.call(sources) === '[object Array]'\n  }\n\n  isDate(sources) {\n    return (\n      {}.toString.call(sources) === '[object Date]' &&\n      sources.toString() !== 'Invalid Date' &&\n      !isNaN(sources)\n    )\n  }\n\n  isElement(sources) {\n    return !!(sources && sources.nodeName && sources.nodeType === 1)\n  }\n\n  isFunction(sources) {\n    return Object.prototype.toString.call(sources) === '[object Function]'\n  }\n\n  isNumber(sources) {\n    return (\n      Object.prototype.toString.call(sources) === '[object Number]' &&\n      isFinite(sources)\n    )\n  }\n\n  isObject(sources) {\n    return Object.prototype.toString.call(sources) === '[object Object]'\n  }\n\n  isString(sources) {\n    return Object.prototype.toString.call(sources) === '[object String]'\n  }\n\n  isBoolean(sources) {\n    return typeof sources === 'boolean'\n  }\n\n  isEmpty(content) {\n    const str = content\n    if (str === '' || str === undefined) return true\n    const regu = '^[ ]+$'\n    const re = new RegExp(regu)\n    return re.test(str)\n  }\n}\nexport default new Utils()\n","// Exports\nmodule.exports = {};\n","// Exports\nmodule.exports = {};\n","import mod from \"-!../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./TagInput.vue?vue&type=style&index=0&id=cf173526&lang=scss&scoped=true&\"; export default mod; export * from \"-!../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./TagInput.vue?vue&type=style&index=0&id=cf173526&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"select-tags\"},[_vm._ssrNode(\"<input id=\\\"tags\\\" name=\\\"tags\\\" type=\\\"hidden\\\"\"+(_vm._ssrAttr(\"value\",(_vm.tags)))+\" data-v-cf173526> <div class=\\\"tags-selected\\\" data-v-cf173526>\"+(_vm._ssrList((_vm.tags),function(tag){return (\"<span class=\\\"tag-item\\\" data-v-cf173526><span class=\\\"text\\\" data-v-cf173526>\"+_vm._ssrEscape(_vm._s(tag))+\"<i\"+(_vm._ssrAttr(\"data-name\",tag))+\" class=\\\"iconfont icon-close\\\" data-v-cf173526></i></span></span>\")}))+\"</div> <input\"+(_vm._ssrAttr(\"placeholder\",'标签（请用逗号分隔每个标签，最多' +\n        _vm.maxTagCount +\n        '个，每个最长15字符）'))+\" type=\\\"text\\\"\"+(_vm._ssrAttr(\"value\",(_vm.inputTag)))+\" class=\\\"input\\\" data-v-cf173526> \"+((_vm.autocompleteTags.length > 0)?(\"<div class=\\\"autocomplete-tags\\\" data-v-cf173526><div class=\\\"tags-container\\\" data-v-cf173526><section class=\\\"tag-section\\\" data-v-cf173526>\"+(_vm._ssrList((_vm.autocompleteTags),function(item,index){return (\"<div\"+(_vm._ssrClass(\"tag-item\",{ active: index === _vm.selectIndex }))+\" data-v-cf173526>\"+_vm._ssrEscape(_vm._s(item))+\"</div>\")}))+\"</section></div></div>\"):\"<!---->\")+\" \"+((_vm.showRecommendTags)?(\"<div class=\\\"recommend-tags\\\" data-v-cf173526><div class=\\\"tags-container\\\" data-v-cf173526><div class=\\\"header\\\" data-v-cf173526><span data-v-cf173526>推荐标签</span> <span class=\\\"close-recommend\\\" data-v-cf173526><i class=\\\"iconfont icon-close\\\" data-v-cf173526></i></span></div> \"+(_vm._ssrList((_vm.recommendTags),function(tag){return (\"<a class=\\\"tag-item\\\" data-v-cf173526>\"+_vm._ssrEscape(_vm._s(tag))+\"</a>\")}))+\"</div></div>\"):\"<!---->\"))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  props: {\n    value: {\n      type: Array,\n      default() {\n        return []\n      }\n    }\n  },\n  data() {\n    return {\n      tags: this.value || [],\n      maxTagCount: 3, // 最多可以选择的标签数量\n      maxWordCount: 15, // 每个标签最大字数\n      showRecommendTags: false, // 是否显示推荐\n      inputTag: '',\n      autocompleteTags: [],\n      selectIndex: -1\n    }\n  },\n  computed: {\n    // 推荐标签\n    recommendTags() {\n      return this.$store.state.config.config.recommendTags\n    }\n  },\n  methods: {\n    removeTag(event, tag) {\n      const selectionStart = this.$refs.tagInput.selectionStart\n      if (!this.inputTag || selectionStart === 0) {\n        // input框没内容，或者光标在首位的时候就删除最后一个标签\n        this.tags.splice(this.tags.length - 1, 1)\n        this.$emit('input', this.tags)\n      }\n    },\n\n    clickRemoveTag(event) {\n      const tag = event.target.dataset.name\n      if (tag) {\n        const index = this.tags.indexOf(tag)\n        if (index !== -1) {\n          this.tags.splice(index, 1)\n          this.$emit('input', this.tags)\n        }\n      }\n    },\n\n    /**\n     * 手动点击选择标签\n     * @param index\n     */\n    selectTag(index) {\n      this.selectIndex = index\n      this.addTag()\n    },\n\n    /**\n     * 添加标签\n     * @param event\n     */\n    addTag(event) {\n      if (event) {\n        event.stopPropagation()\n        event.preventDefault()\n      }\n\n      if (\n        this.selectIndex >= 0 &&\n        this.autocompleteTags.length > this.selectIndex\n      ) {\n        this.addTagName(this.autocompleteTags[this.selectIndex])\n      } else {\n        this.addTagName(this.inputTag)\n      }\n      this.autocompleteTags = []\n      this.selectIndex = -1\n    },\n\n    /**\n     * 添加推荐标签\n     * @param tagName\n     */\n    addRecommendTag(tagName) {\n      this.addTagName(tagName)\n      this.closeRecommendTags()\n    },\n\n    /**\n     * 添加标签\n     * @param tagName 标签名称\n     * @returns {boolean} 是否成功\n     */\n    addTagName(tagName) {\n      if (!tagName) {\n        return false\n      }\n\n      // 最多四个标签\n      if (this.tags && this.tags.length >= this.maxTagCount) {\n        return false\n      }\n\n      // 每个标签最多15个字符\n      if (tagName.length > this.maxWordCount) {\n        return false\n      }\n\n      // 标签已经存在\n      if (this.tags && this.tags.includes(tagName)) {\n        return false\n      }\n\n      this.tags.push(tagName)\n      this.inputTag = ''\n      this.$emit('input', this.tags)\n      return true\n    },\n\n    async autocomplete() {\n      this.closeRecommendTags()\n      this.selectIndex = -1\n      if (!this.inputTag) {\n        this.autocompleteTags = []\n      } else {\n        const ret = await this.$axios.post('/api/tag/autocomplete', {\n          input: this.inputTag\n        })\n        this.autocompleteTags = []\n        if (ret.length > 0) {\n          for (let i = 0; i < ret.length; i++) {\n            this.autocompleteTags.push(ret[i].name)\n          }\n        }\n      }\n    },\n\n    selectUp(event) {\n      event.stopPropagation()\n      event.preventDefault()\n      const curIndex = this.selectIndex\n      const maxIndex = this.autocompleteTags.length - 1\n      if (maxIndex < 0 || curIndex < 0) {\n        // 已经在最顶部\n        return\n      }\n      this.selectIndex--\n    },\n\n    selectDown(event) {\n      event.stopPropagation()\n      event.preventDefault()\n      const curIndex = this.selectIndex\n      const maxIndex = this.autocompleteTags.length - 1\n      if (maxIndex < 0 || curIndex >= maxIndex) {\n        // 已经在最底部\n        return\n      }\n      this.selectIndex++\n    },\n\n    // 关闭推荐\n    openRecommendTags() {\n      this.showRecommendTags = true\n    },\n\n    // 开启推荐\n    closeRecommendTags() {\n      setTimeout(() => {\n        this.showRecommendTags = false\n      }, 300)\n    },\n\n    // 关闭自动补全\n    close() {\n      if (this.autocompleteTags && this.autocompleteTags.length > 0) {\n        this.autocompleteTags = []\n        this.selectIndex = -1\n      }\n      this.closeRecommendTags()\n    }\n  }\n}\n","import mod from \"-!../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./TagInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./TagInput.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TagInput.vue?vue&type=template&id=cf173526&scoped=true&\"\nimport script from \"./TagInput.vue?vue&type=script&lang=js&\"\nexport * from \"./TagInput.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./TagInput.vue?vue&type=style&index=0&id=cf173526&lang=scss&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"cf173526\",\n  \"d9b14516\"\n  \n)\n\nexport default component.exports","import mod from \"-!../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./MarkdownHelp.vue?vue&type=style&index=0&id=29e12336&lang=scss&scoped=true&\"; export default mod; export * from \"-!../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./MarkdownHelp.vue?vue&type=style&index=0&id=29e12336&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"widget markdown-help\"},[_vm._ssrNode(\"<div class=\\\"widget-header\\\" data-v-29e12336>\\n    Markdown 语法参考\\n  </div> <div class=\\\"widget-content content\\\" data-v-29e12336><ol data-v-29e12336><li data-v-29e12336><span style=\\\"font-weight: 700; color: red;\\\" data-v-29e12336>将图片复制或拖入编辑器可上传</span></li> <li data-v-29e12336>## 单行的标题</li> <li data-v-29e12336>**粗体**</li> <li data-v-29e12336>`console.log('行内代码')`</li> <li data-v-29e12336>```js\\\\n code \\\\n``` 标记代码块</li> <li data-v-29e12336>[内容](链接)</li> <li data-v-29e12336>![文字说明](图片链接)</li></ol> <span data-v-29e12336><a href=\\\"https://mlog.club/article/5522\\\" target=\\\"_blank\\\" data-v-29e12336>Markdown 文档</a></span></div>\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {}\n","import mod from \"-!../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./MarkdownHelp.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./MarkdownHelp.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MarkdownHelp.vue?vue&type=template&id=29e12336&scoped=true&\"\nimport script from \"./MarkdownHelp.vue?vue&type=script&lang=js&\"\nexport * from \"./MarkdownHelp.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./MarkdownHelp.vue?vue&type=style&index=0&id=29e12336&lang=scss&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"29e12336\",\n  \"e8be3116\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vditor\",style:({ width: _vm.width, height: _vm.height }),attrs:{\"id\":_vm.editorId}},[])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  props: {\n    editorId: {\n      type: String,\n      default: 'vditor'\n    },\n    value: {\n      type: String,\n      default: ''\n    },\n    height: {\n      type: String,\n      default: '400px' // normal、mini\n    },\n    placeholder: {\n      type: String,\n      default: '请输入...'\n    }\n  },\n  data() {\n    return {\n      isLoading: true,\n      vditor: null,\n      width: '100%',\n      toolbar: [\n        // 'emoji',\n        'headings',\n        'bold',\n        'italic',\n        'strike',\n        '|',\n        'line',\n        'quote',\n        'list',\n        'ordered-list',\n        'check',\n        'code',\n        'inline-code',\n        'undo',\n        'redo',\n        'upload',\n        'link',\n        'table',\n        'wysiwyg',\n        'both',\n        'preview',\n        'format',\n        'fullscreen'\n      ]\n    }\n  },\n  mounted() {\n    this.doInit()\n    this.$nextTick(async () => {\n      if (this.vditor) {\n        await this.vditor.getHTML(true)\n        this.isLoading = false\n      }\n    })\n  },\n  methods: {\n    /**\n     * 初始化编辑器\n     */\n    doInit() {\n      if (!process.client) {\n        return\n      }\n      const me = this\n      const userToken = this.$cookies.get('userToken')\n      const options = {\n        width: me.width,\n        height: me.height,\n        toolbar: me.toolbar,\n        placeholder: me.placeholder,\n        cache: true,\n        counter: '999999',\n        delay: 500,\n        mode: 'markdown-show',\n        theme: 'classic',\n        customEmoji: {\n          '1': '😝'\n        },\n        preview: {\n          mode: 'editor',\n          hljs: {\n            enable: true,\n            style: 'github',\n            lineNumber: true\n          }\n        },\n        input(val) {\n          me.$emit('input', val)\n        },\n        ctrlEnter(val) {\n          me.$emit('input', val)\n          me.$emit('submit', val)\n        },\n        upload: {\n          accept: 'image/*',\n          url: '/api/upload/editor?userToken=' + userToken,\n          linkToImgUrl: '/api/upload/fetch?userToken=' + userToken,\n          filename(name) {\n            return name.replace(/\\?|\\\\|\\/|:|\\||<|>|\\*|\\[|\\]|\\s+/g, '-')\n          }\n        }\n      }\n      this.vditor = new window.Vditor(me.editorId, options)\n      this.vditor.setValue(this.value)\n    },\n    /**\n     * 清空编辑器内容\n     */\n    clear() {\n      if (this.vditor) {\n        this.value = ''\n        this.vditor.setValue('')\n        this.clearCache()\n      }\n    },\n    /**\n     * 清理缓存\n     */\n    clearCache() {\n      if (this.vditor) {\n        this.vditor.clearCache()\n      }\n    }\n  },\n  head() {\n    return {\n      link: [\n        {\n          rel: 'stylesheet',\n          href: '//cdn.jsdelivr.net/npm/vditor@2.1.0/dist/index.classic.css'\n        }\n      ],\n      script: [\n        {\n          src: '//cdn.jsdelivr.net/npm/vditor@2.1.0/dist/index.min.js'\n        }\n      ]\n    }\n  }\n}\n","import mod from \"-!../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./MarkdownEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./MarkdownEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MarkdownEditor.vue?vue&type=template&id=6f3f59ba&scoped=true&\"\nimport script from \"./MarkdownEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./MarkdownEditor.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"6f3f59ba\",\n  \"7f27a6be\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAIA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAFA;AAQA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AACA;AAIA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AALA;AAMA;AACA;AACA;AACA;AACA;AACA;AAzBA;AACA;AAyBA;AACA;AACA;AADA;AAGA;AACA;AAtDA;;AC5EA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACrBA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7EA;AACA;AA6EA;;;;;;;AC/EA;AACA;;;;;;;;ACDA;AACA;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AALA;AADA;AACA;AAOA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAPA;AASA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AAMA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AA1JA;AA1BA;;ACxEA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACvBA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;ACAA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AC7BA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACvBA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAHA;AAIA;AACA;AACA;AAFA;AAbA;AACA;AAiBA;AACA;AACA;AACA;AACA;AACA;AAEA;AANA;AA8BA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AAHA;AAFA;AACA;AAOA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAPA;AA5BA;AAqCA;AACA;AACA;AACA;AAAA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AApEA;AACA;AAoEA;AACA;AACA;AAEA;AACA;AAFA;AAKA;AAEA;AADA;AARA;AAaA;AACA;AAhJA;;ACTA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}
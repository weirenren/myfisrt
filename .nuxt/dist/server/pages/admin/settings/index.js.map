{"version":3,"file":"pages/admin/settings/index.js","sources":["webpack:///./pages/admin/settings/index.vue?a009","webpack:///./pages/admin/settings/index.vue?a442","webpack:///./pages/admin/settings/index.vue?2a4c","webpack:///./pages/admin/settings/index.vue","webpack:///./pages/admin/settings/index.vue?28de","webpack:///./pages/admin/settings/index.vue?8950"],"sourcesContent":["// Exports\nmodule.exports = {};\n","import mod from \"-!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=2a701c61&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=2a701c61&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"page-container\"},[_vm._ssrNode(\"<div class=\\\"page-section config-panel\\\" data-v-2a701c61>\",\"</div>\",[_c('el-tabs',{attrs:{\"value\":\"commonConfigTab\"}},[_c('el-tab-pane',{attrs:{\"label\":\"通用配置\",\"name\":\"commonConfigTab\"}},[_c('div',{staticClass:\"config\"},[_c('el-form',{attrs:{\"label-width\":\"160px\"}},[_c('el-form-item',{attrs:{\"label\":\"网站名称\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"网站名称\"},model:{value:(_vm.config.siteTitle),callback:function ($$v) {_vm.$set(_vm.config, \"siteTitle\", $$v)},expression:\"config.siteTitle\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"网站描述\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":\"\",\"placeholder\":\"网站描述\"},model:{value:(_vm.config.siteDescription),callback:function ($$v) {_vm.$set(_vm.config, \"siteDescription\", $$v)},expression:\"config.siteDescription\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"网站关键字\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"multiple\":\"\",\"filterable\":\"\",\"allow-create\":\"\",\"default-first-option\":\"\",\"placeholder\":\"网站关键字\"},model:{value:(_vm.config.siteKeywords),callback:function ($$v) {_vm.$set(_vm.config, \"siteKeywords\", $$v)},expression:\"config.siteKeywords\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"网站公告\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":\"\",\"placeholder\":\"网站公告（支持输入HTML）\"},model:{value:(_vm.config.siteNotification),callback:function ($$v) {_vm.$set(_vm.config, \"siteNotification\", $$v)},expression:\"config.siteNotification\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"推荐标签\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"multiple\":\"\",\"filterable\":\"\",\"allow-create\":\"\",\"default-first-option\":\"\",\"placeholder\":\"推荐标签\"},model:{value:(_vm.config.recommendTags),callback:function ($$v) {_vm.$set(_vm.config, \"recommendTags\", $$v)},expression:\"config.recommendTags\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"默认节点\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":\"发帖默认节点\"},model:{value:(_vm.config.defaultNodeId),callback:function ($$v) {_vm.$set(_vm.config, \"defaultNodeId\", $$v)},expression:\"config.defaultNodeId\"}},_vm._l((_vm.nodes),function(node){return _c('el-option',{key:node.id,attrs:{\"label\":node.name,\"value\":node.id}})}),1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"站外链接跳转页面\"}},[_c('el-tooltip',{attrs:{\"content\":\"在跳转前需手动确认是否前往该站外链接\",\"placement\":\"top\"}},[_c('el-switch',{model:{value:(_vm.config.urlRedirect),callback:function ($$v) {_vm.$set(_vm.config, \"urlRedirect\", $$v)},expression:\"config.urlRedirect\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"发帖验证码\"}},[_c('el-tooltip',{attrs:{\"content\":\"发帖时是否开启验证码校验\",\"placement\":\"top\"}},[_c('el-switch',{model:{value:(_vm.config.topicCaptcha),callback:function ($$v) {_vm.$set(_vm.config, \"topicCaptcha\", $$v)},expression:\"config.topicCaptcha\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"发表文章审核\"}},[_c('el-tooltip',{attrs:{\"content\":\"发布文章后是否开启审核\",\"placement\":\"top\"}},[_c('el-switch',{model:{value:(_vm.config.articlePending),callback:function ($$v) {_vm.$set(_vm.config, \"articlePending\", $$v)},expression:\"config.articlePending\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"用户观察期\"}},[_c('el-tooltip',{attrs:{\"content\":\"观察期内用户无法发表话题、动态等内容，设置为 0 表示无观察期。\",\"placement\":\"top\"}},[_c('el-input-number',{attrs:{\"min\":0,\"max\":720,\"label\":\"用户观察期(小时)\"},model:{value:(_vm.config.userObserveHour),callback:function ($$v) {_vm.$set(_vm.config, \"userObserveHour\", $$v)},expression:\"config.userObserveHour\"}})],1)],1)],1)],1)]),_vm._v(\" \"),_c('el-tab-pane',{staticClass:\"nav-panel\",attrs:{\"label\":\"导航配置\",\"name\":\"navConfigTab\"}},[_c('draggable',{staticClass:\"navs\",attrs:{\"draggable\":\".nav\",\"handle\":\".nav-sort-btn\"},model:{value:(_vm.config.siteNavs),callback:function ($$v) {_vm.$set(_vm.config, \"siteNavs\", $$v)},expression:\"config.siteNavs\"}},_vm._l((_vm.config.siteNavs),function(nav,index){return _c('div',{key:index,staticClass:\"nav\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":1}},[_c('i',{staticClass:\"iconfont icon-sort nav-sort-btn\"})]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":10}},[_c('el-input',{attrs:{\"type\":\"text\",\"size\":\"small\",\"placeholder\":\"标题\"},model:{value:(nav.title),callback:function ($$v) {_vm.$set(nav, \"title\", $$v)},expression:\"nav.title\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":11}},[_c('el-input',{attrs:{\"type\":\"text\",\"size\":\"small\",\"placeholder\":\"链接\"},model:{value:(nav.url),callback:function ($$v) {_vm.$set(nav, \"url\", $$v)},expression:\"nav.url\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":2}},[_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"circle\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.delNav(index)}}})],1)],1)],1)}),0),_vm._v(\" \"),_c('div',{staticClass:\"add-nav\"},[_c('el-tooltip',{staticClass:\"item\",attrs:{\"effect\":\"dark\",\"content\":\"点击按钮添加导航\",\"placement\":\"top\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\",\"circle\":\"\"},on:{\"click\":_vm.addNav}})],1)],1)],1),_vm._v(\" \"),(_vm.config.scoreConfig)?_c('el-tab-pane',{attrs:{\"label\":\"积分配置\",\"name\":\"scoreConfigTab\"}},[_c('el-form',{attrs:{\"label-width\":\"160px\"}},[_c('el-form-item',{attrs:{\"label\":\"发帖获得积分\"}},[_c('el-input-number',{attrs:{\"min\":1,\"type\":\"text\",\"placeholder\":\"发帖获得积分\"},model:{value:(_vm.config.scoreConfig.postTopicScore),callback:function ($$v) {_vm.$set(_vm.config.scoreConfig, \"postTopicScore\", $$v)},expression:\"config.scoreConfig.postTopicScore\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"跟帖获得积分\"}},[_c('el-input-number',{attrs:{\"min\":1,\"type\":\"text\",\"placeholder\":\"跟帖获得积分\"},model:{value:(_vm.config.scoreConfig.postCommentScore),callback:function ($$v) {_vm.$set(_vm.config.scoreConfig, \"postCommentScore\", $$v)},expression:\"config.scoreConfig.postCommentScore\"}})],1)],1)],1):_vm._e()],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div style=\\\"text-align: right;\\\" data-v-2a701c61>\",\"</div>\",[_c('el-button',{attrs:{\"loading\":_vm.loading,\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存配置\\n      \")])],1)],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport draggable from 'vuedraggable'\n\nexport default {\n  layout: 'admin',\n  components: {\n    draggable\n  },\n  data() {\n    return {\n      config: {},\n      loading: false,\n      autocompleteTags: [],\n      autocompleteTagLoading: false,\n      nodes: []\n    }\n  },\n  mounted() {\n    this.load()\n  },\n  methods: {\n    async load() {\n      this.loading = true\n      try {\n        this.config = await this.$axios.get('/api/admin/sys-config/all')\n        this.nodes = await this.$axios.get('/api/admin/topic-node/nodes')\n      } catch (err) {\n        this.$notify.error({ title: '错误', message: err.message })\n      } finally {\n        this.loading = false\n      }\n    },\n    async save() {\n      this.loading = true\n      try {\n        await this.$axios.post('/api/admin/sys-config/save', {\n          config: JSON.stringify(this.config)\n        })\n        this.$message({ message: '提交成功', type: 'success' })\n        this.load()\n      } catch (err) {\n        this.$notify.error({ title: '错误', message: err.message })\n      } finally {\n        this.loading = false\n      }\n    },\n    addNav() {\n      if (!this.config.siteNavs) {\n        this.config.siteNavs = []\n      }\n      this.config.siteNavs.push({\n        title: '',\n        url: ''\n      })\n    },\n    delNav(index) {\n      if (!this.config.siteNavs) {\n        return\n      }\n      this.config.siteNavs.splice(index, 1)\n    }\n  }\n}\n","import mod from \"-!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=2a701c61&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./index.vue?vue&type=style&index=0&id=2a701c61&scoped=true&lang=scss&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"2a701c61\",\n  \"252f3f95\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;AAAA;AACA;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AACA;AACA;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AADA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAzCA;AAjBA;;AChNA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}
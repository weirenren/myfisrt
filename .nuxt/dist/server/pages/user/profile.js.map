{"version":3,"file":"pages/user/profile.js","sources":["webpack:///./pages/user/profile.vue?0304","webpack:///./pages/user/profile.vue?8199","webpack:///./pages/user/profile.vue?d175","webpack:///./pages/user/profile.vue","webpack:///./pages/user/profile.vue?4339","webpack:///./pages/user/profile.vue?7a12","webpack:///./components/PostBtns.vue?a753","webpack:///./components/UserCenterSidebar.vue?4327","webpack:///./components/PostBtns.vue?1468","webpack:///./components/UserCenterSidebar.vue?967d","webpack:///./components/UserCenterSidebar.vue?8b42","webpack:///./components/PostBtns.vue?88b5","webpack:///PostBtns.vue","webpack:///./components/PostBtns.vue?33ea","webpack:///./components/PostBtns.vue","webpack:///./components/UserCenterSidebar.vue","webpack:///./components/UserCenterSidebar.vue?8a54","webpack:///./components/UserCenterSidebar.vue?f0dd"],"sourcesContent":["// Exports\nmodule.exports = {};\n","import mod from \"-!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./profile.vue?vue&type=style&index=0&id=9782a05c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./profile.vue?vue&type=style&index=0&id=9782a05c&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"main\"},[_vm._ssrNode(\"<div class=\\\"container main-container is-white left-main\\\" data-v-9782a05c>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"left-container\\\" data-v-9782a05c><div class=\\\"widget\\\" data-v-9782a05c><div class=\\\"widget-header\\\" data-v-9782a05c><nav class=\\\"breadcrumb\\\" data-v-9782a05c><ul data-v-9782a05c><li data-v-9782a05c><a href=\\\"/\\\" data-v-9782a05c>首页</a></li> <li data-v-9782a05c><a\"+(_vm._ssrAttr(\"href\",'/user/' + _vm.user.id))+\" data-v-9782a05c>\"+_vm._ssrEscape(_vm._s(_vm.user.nickname))+\"</a></li> <li class=\\\"is-active\\\" data-v-9782a05c><a href=\\\"#\\\" aria-current=\\\"page\\\" data-v-9782a05c>账号认证</a></li></ul></nav></div> <div class=\\\"widget-content\\\" data-v-9782a05c><div class=\\\"field is-horizontal\\\" data-v-9782a05c><div class=\\\"field-label is-normal\\\" data-v-9782a05c><label class=\\\"label\\\" data-v-9782a05c>账号段位：</label></div> <div class=\\\"field-body\\\" data-v-9782a05c><div class=\\\"field\\\" data-v-9782a05c><div class=\\\"control has-icons-left\\\" data-v-9782a05c>\"+((_vm.user.username)?(\"<label data-v-9782a05c>\"+_vm._ssrEscape(_vm._s(_vm.user.username))+\"</label>\"):(\"<a data-v-9782a05c>点击设置</a>\"))+\"</div></div></div></div> <div class=\\\"field is-horizontal\\\" data-v-9782a05c><div class=\\\"field-label is-normal\\\" data-v-9782a05c><label class=\\\"label\\\" data-v-9782a05c>推荐人：</label></div> <div class=\\\"field-body\\\" data-v-9782a05c><div class=\\\"field\\\" data-v-9782a05c><div class=\\\"control has-icons-left\\\" data-v-9782a05c>\"+((_vm.user.username)?(\"<label data-v-9782a05c>\"+_vm._ssrEscape(_vm._s(_vm.user.username))+\"</label>\"):(\"<a data-v-9782a05c>点击设置</a>\"))+\"</div></div></div></div> <div class=\\\"field is-horizontal\\\" data-v-9782a05c><div class=\\\"field-label is-normal\\\" data-v-9782a05c><label class=\\\"label\\\" data-v-9782a05c>推荐人列表：</label></div> <div class=\\\"field-body\\\" data-v-9782a05c><div class=\\\"field\\\" data-v-9782a05c><div class=\\\"control has-icons-left\\\" data-v-9782a05c>\"+((_vm.user.username)?(\"<label data-v-9782a05c>\"+_vm._ssrEscape(_vm._s(_vm.user.username))+\"</label>\"):(\"<a data-v-9782a05c>点击设置</a>\"))+\"</div></div></div></div> \"+((_vm.verifyCode === 0)?(\"<div class=\\\"field is-horizontal\\\" data-v-9782a05c><div class=\\\"field-label is-normal\\\" data-v-9782a05c><label class=\\\"label\\\" data-v-9782a05c> 邀请码：</label></div> <div class=\\\"field-body\\\" data-v-9782a05c><div class=\\\"field\\\" data-v-9782a05c><div class=\\\"control has-icons-left\\\" data-v-9782a05c>\"+((_vm.user.username)?(\"<label data-v-9782a05c>\"+_vm._ssrEscape(_vm._s(_vm.userCode))+\"</label>\"):(\"<a data-v-9782a05c>点击设置</a>\"))+\"</div></div></div></div>\"):\"<!---->\")+\" <div class=\\\"field is-horizontal\\\" data-v-9782a05c><div class=\\\"field-label is-normal\\\" data-v-9782a05c><label class=\\\"label\\\" data-v-9782a05c>用户认证：</label></div> <div class=\\\"field-body\\\" data-v-9782a05c><div class=\\\"field\\\" data-v-9782a05c><div class=\\\"control has-icons-left\\\" data-v-9782a05c>\"+((_vm.user)?(((_vm.verifyCode === 0)?(\"<span class=\\\"has-text-success\\\" data-v-9782a05c>已验证</span>\"):(\"<a class=\\\"has-text-danger\\\" data-v-9782a05c>点击验证&gt;&gt;</a>\"))):\"<!---->\")+\"</div></div></div></div> <div class=\\\"field is-horizontal\\\" data-v-9782a05c><div class=\\\"field-label is-normal\\\" data-v-9782a05c><label class=\\\"label\\\" data-v-9782a05c> 是否认证：</label></div> <div class=\\\"field-body\\\" data-v-9782a05c><div class=\\\"field\\\" data-v-9782a05c><div class=\\\"control has-icons-left\\\" data-v-9782a05c>\"+((_vm.user)?(\"<label data-v-9782a05c>\"+_vm._ssrEscape(_vm._s(_vm.verifyCode === 0 ? '是' : '否'))+\"</label>\"):(\"<a data-v-9782a05c>点击设置</a>\"))+\"</div></div></div></div> <div class=\\\"field is-horizontal\\\" data-v-9782a05c><div class=\\\"field-label is-normal\\\" data-v-9782a05c></div> <div class=\\\"field-body\\\" data-v-9782a05c><div class=\\\"field\\\" data-v-9782a05c><div class=\\\"control\\\" data-v-9782a05c><a class=\\\"button is-success\\\" data-v-9782a05c>提交修改</a></div></div></div></div></div></div></div> \"),_c('user-center-sidebar',{attrs:{\"user\":_vm.user}})],2),_vm._ssrNode(\" <div\"+(_vm._ssrClass(\"modal\",{ 'is-active': _vm.showSetUsername }))+\" data-v-9782a05c><div class=\\\"modal-background\\\" data-v-9782a05c></div> <div class=\\\"modal-card\\\" data-v-9782a05c><div class=\\\"widget\\\" data-v-9782a05c><div class=\\\"widget-header\\\" data-v-9782a05c>\\n          设置用户名\\n          <button aria-label=\\\"close\\\" class=\\\"delete\\\" data-v-9782a05c></button></div> <div class=\\\"widget-content\\\" data-v-9782a05c><div class=\\\"field\\\" data-v-9782a05c><div class=\\\"control has-icons-left\\\" data-v-9782a05c><input type=\\\"text\\\" placeholder=\\\"请输入用户名\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.username)))+\" class=\\\"input is-success\\\" data-v-9782a05c> <span class=\\\"icon is-small is-left\\\" data-v-9782a05c><i class=\\\"iconfont icon-username\\\" data-v-9782a05c></i></span></div></div></div> <div class=\\\"widget-footer is-right\\\" data-v-9782a05c><a class=\\\"button is-success\\\" data-v-9782a05c>确定</a> <a class=\\\"button\\\" data-v-9782a05c>取消</a></div></div></div></div> <div\"+(_vm._ssrClass(\"modal\",{ 'is-active': _vm.showSetEmail }))+\" data-v-9782a05c><div class=\\\"modal-background\\\" data-v-9782a05c></div> <div class=\\\"modal-card\\\" data-v-9782a05c><div class=\\\"widget\\\" data-v-9782a05c><div class=\\\"widget-header\\\" data-v-9782a05c>\\n          申请用户认证\\n          <button aria-label=\\\"close\\\" class=\\\"delete\\\" data-v-9782a05c></button></div> <div class=\\\"widget-content\\\" data-v-9782a05c><div class=\\\"field\\\" data-v-9782a05c><div class=\\\"control has-icons-left\\\" data-v-9782a05c><input type=\\\"text\\\" placeholder=\\\"请输入邀请码\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.hostUserCode)))+\" class=\\\"input is-success\\\" data-v-9782a05c> <span class=\\\"icon is-small is-left\\\" data-v-9782a05c><i class=\\\"iconfont icon-email\\\" data-v-9782a05c></i></span></div></div></div> <div class=\\\"widget-footer is-right\\\" data-v-9782a05c><a class=\\\"button is-success\\\" data-v-9782a05c>确定</a> <a class=\\\"button\\\" data-v-9782a05c>取消</a></div></div></div></div> <div\"+(_vm._ssrClass(\"modal\",{ 'is-active': _vm.showSetPassword }))+\" data-v-9782a05c><div class=\\\"modal-background\\\" data-v-9782a05c></div> <div class=\\\"modal-card\\\" data-v-9782a05c><div class=\\\"widget\\\" data-v-9782a05c><div class=\\\"widget-header\\\" data-v-9782a05c>\\n          设置密码\\n          <button aria-label=\\\"close\\\" class=\\\"delete\\\" data-v-9782a05c></button></div> <div class=\\\"widget-content\\\" data-v-9782a05c><div class=\\\"field\\\" data-v-9782a05c><div class=\\\"control has-icons-left\\\" data-v-9782a05c><input type=\\\"password\\\" placeholder=\\\"请输入密码\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.password)))+\" class=\\\"input is-success\\\" data-v-9782a05c> <span class=\\\"icon is-small is-left\\\" data-v-9782a05c><i class=\\\"iconfont icon-password\\\" data-v-9782a05c></i></span></div></div> <div class=\\\"field\\\" data-v-9782a05c><div class=\\\"control has-icons-left\\\" data-v-9782a05c><input type=\\\"password\\\" placeholder=\\\"请再次确认密码\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.rePassword)))+\" class=\\\"input is-success\\\" data-v-9782a05c> <span class=\\\"icon is-small is-left\\\" data-v-9782a05c><i class=\\\"iconfont icon-password\\\" data-v-9782a05c></i></span></div></div></div> <div class=\\\"widget-footer is-right\\\" data-v-9782a05c><a class=\\\"button is-success\\\" data-v-9782a05c>确定</a> <a class=\\\"button\\\" data-v-9782a05c>取消</a></div></div></div></div> <div\"+(_vm._ssrClass(\"modal\",{ 'is-active': _vm.showUpdatePassword }))+\" data-v-9782a05c><div class=\\\"modal-background\\\" data-v-9782a05c></div> <div class=\\\"modal-card\\\" data-v-9782a05c><div class=\\\"widget\\\" data-v-9782a05c><div class=\\\"widget-header\\\" data-v-9782a05c>\\n          修改密码\\n          <button aria-label=\\\"close\\\" class=\\\"delete\\\" data-v-9782a05c></button></div> <div class=\\\"widget-content\\\" data-v-9782a05c><div class=\\\"field\\\" data-v-9782a05c><div class=\\\"control has-icons-left\\\" data-v-9782a05c><input type=\\\"password\\\" placeholder=\\\"请输入当前密码\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.oldPassword)))+\" class=\\\"input is-success\\\" data-v-9782a05c> <span class=\\\"icon is-small is-left\\\" data-v-9782a05c><i class=\\\"iconfont icon-password\\\" data-v-9782a05c></i></span></div></div> <div class=\\\"field\\\" data-v-9782a05c><div class=\\\"control has-icons-left\\\" data-v-9782a05c><input type=\\\"password\\\" placeholder=\\\"请输入密码\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.password)))+\" class=\\\"input is-success\\\" data-v-9782a05c> <span class=\\\"icon is-small is-left\\\" data-v-9782a05c><i class=\\\"iconfont icon-password\\\" data-v-9782a05c></i></span></div></div> <div class=\\\"field\\\" data-v-9782a05c><div class=\\\"control has-icons-left\\\" data-v-9782a05c><input type=\\\"password\\\" placeholder=\\\"请再次确认密码\\\"\"+(_vm._ssrAttr(\"value\",(_vm.form.rePassword)))+\" class=\\\"input is-success\\\" data-v-9782a05c> <span class=\\\"icon is-small is-left\\\" data-v-9782a05c><i class=\\\"iconfont icon-password\\\" data-v-9782a05c></i></span></div></div></div> <div class=\\\"widget-footer is-right\\\" data-v-9782a05c><a class=\\\"button is-success\\\" data-v-9782a05c>确定</a> <a class=\\\"button\\\" data-v-9782a05c>取消</a></div></div></div></div>\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport UserCenterSidebar from '~/components/UserCenterSidebar'\nexport default {\n  middleware: 'authenticated',\n  components: {\n    UserCenterSidebar\n  },\n  async asyncData({ $axios, params }) {\n    const user = await $axios.get('/api/user/current')\n    let userCode = ''\n    let verifyCode = -1\n    if (user) {\n      const verifyStateObj = await $axios.get('/api/user/verify/state')\n      if (verifyStateObj) {\n        verifyCode = verifyStateObj.verify_code\n      }\n\n      // 认证用户下 才去请求\n      if (verifyCode === 0) {\n        const userCodeObj = await $axios.get('/api/user/usercode')\n        if (userCodeObj) {\n          userCode = userCodeObj.userCode.code\n        }\n      }\n\n      console.log('verifyStateObj:' + JSON.stringify(verifyStateObj))\n    }\n    const form = { ...user }\n    return {\n      user,\n      form,\n      userCode,\n      verifyCode\n    }\n  },\n  data() {\n    return {\n      form: {\n        hostUserCode: '',\n        username: '',\n        email: '',\n        nickname: '',\n        avatar: '',\n        homePage: '',\n        description: '',\n        password: '',\n        rePassword: '',\n        oldPassword: ''\n      },\n      userCode: '',\n      verifyCode: -1, // 是否属于认证用户，0：认证成功\n      showSetUsername: false,\n      // username: '',\n\n      showSetEmail: false,\n      // email: '',\n\n      showSetPassword: false, // 显示设置密码\n      showUpdatePassword: false // 显示修改密码\n      // password: '',\n      // rePassword: '',\n      // oldPassword: ''\n    }\n  },\n  methods: {\n    async submitForm() {\n      try {\n        await this.$axios.post('/api/user/edit/' + this.user.id, {\n          nickname: this.form.nickname,\n          avatar: this.form.avatar,\n          homePage: this.form.homePage,\n          description: this.form.description\n        })\n        await this.reload()\n        this.$toast.success('资料修改成功')\n      } catch (e) {\n        console.error(e)\n        this.$toast.error('资料修改失败：' + (e.message || e))\n      }\n    },\n    async uploadAvatar(e) {\n      const files = e.target.files\n      if (files.length <= 0) {\n        return\n      }\n      try {\n        // 上传头像\n        const file = files[0]\n        const formData = new FormData()\n        formData.append('image', file, file.name)\n        const ret = await this.$axios.post('/api/upload', formData, {\n          headers: { 'Content-Type': 'multipart/form-data' }\n        })\n\n        // 设置头像\n        await this.$axios.post('/api/user/update/avatar', {\n          avatar: ret.url\n        })\n\n        // 重新加载数据\n        await this.reload()\n\n        this.$toast.success('头像更新成功')\n      } catch (e) {\n        console.error(e)\n      }\n    },\n    async setUsername() {\n      try {\n        const me = this\n        await this.$axios.post('/api/user/set/username', {\n          username: me.form.username\n        })\n        await this.reload()\n        this.$toast.success('用户名设置成功')\n        this.showSetUsername = false\n      } catch (err) {\n        this.$toast.error('用户名设置失败：' + (err.message || err))\n      }\n    },\n    async setEmail() {\n      try {\n        const me = this\n        await this.$axios.post('/api/user/love/certify', {\n          user_code: me.form.hostUserCode\n        })\n        await this.reload()\n        this.$toast.success('用户认证成功')\n        this.showSetEmail = false\n      } catch (err) {\n        this.$toast.error('用户认证失败：' + (err.message || err))\n      }\n    },\n    async setPassword() {\n      try {\n        const me = this\n        await this.$axios.post('/api/user/set/password', {\n          password: me.form.password,\n          rePassword: me.form.rePassword\n        })\n        await this.reload()\n        this.$toast.success('密码设置成功')\n        this.showSetPassword = false\n      } catch (err) {\n        this.$toast.error('密码设置失败：' + (err.message || err))\n      }\n    },\n    async updatePassword() {\n      try {\n        const me = this\n        await this.$axios.post('/api/user/update/password', {\n          oldPassword: me.form.oldPassword,\n          password: me.form.password,\n          rePassword: me.form.rePassword\n        })\n        await this.reload()\n        this.$toast.success('密码修改成功')\n        this.showUpdatePassword = false\n      } catch (err) {\n        this.$toast.error('密码修改失败：' + (err.message || err))\n      }\n    },\n    async reload() {\n      this.user = await this.$axios.get('/api/user/current')\n      this.form = { ...this.user }\n    },\n    async requestEmailVerify() {\n      this.$nuxt.$loading.start()\n      try {\n        await this.$axios.post('/api/user/email/verify')\n        this.$toast.success(\n          '邮件已经发送到你的邮箱：' + this.user.email + '，请注意查收。'\n        )\n      } catch (err) {\n        this.$toast.error('请求验证失败：' + (err.message || err))\n      } finally {\n        this.$nuxt.$loading.finish()\n      }\n    }\n  },\n  head() {\n    return {\n      title: this.$siteTitle(this.user.nickname + ' - 账号等级')\n    }\n  }\n}\n","import mod from \"-!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./profile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./profile.vue?vue&type=template&id=9782a05c&scoped=true&\"\nimport script from \"./profile.vue?vue&type=script&lang=js&\"\nexport * from \"./profile.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./profile.vue?vue&type=style&index=0&id=9782a05c&lang=scss&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"9782a05c\",\n  \"6bd66bd4\"\n  \n)\n\nexport default component.exports","// Exports\nmodule.exports = {};\n","// Exports\nmodule.exports = {};\n","import mod from \"-!../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./PostBtns.vue?vue&type=style&index=0&id=2af0916a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./PostBtns.vue?vue&type=style&index=0&id=2af0916a&lang=scss&scoped=true&\"","import mod from \"-!../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./UserCenterSidebar.vue?vue&type=style&index=0&id=3d739100&lang=scss&scoped=true&\"; export default mod; export * from \"-!../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./UserCenterSidebar.vue?vue&type=style&index=0&id=3d739100&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"right-container\"},[(_vm.isOwner)?_c('post-btns'):_vm._e(),_vm._ssrNode(\" <div class=\\\"widget\\\" data-v-3d739100><div class=\\\"widget-header\\\" data-v-3d739100>\"+_vm._ssrEscape(\"\\n      \"+_vm._s(_vm.user.nickname)+\"\\n    \")+\"</div> <div class=\\\"widget-content\\\" data-v-3d739100><img\"+(_vm._ssrAttr(\"src\",_vm.user.smallAvatar))+\" class=\\\"img-avatar\\\" data-v-3d739100> \"+((_vm.user.description)?(\"<div class=\\\"description\\\" data-v-3d739100><p data-v-3d739100>\"+_vm._ssrEscape(_vm._s(_vm.user.description))+\"</p></div>\"):\"<!---->\")+\" <div class=\\\"score\\\" data-v-3d739100><i class=\\\"iconfont icon-score\\\" data-v-3d739100></i> <span data-v-3d739100>\"+_vm._ssrEscape(_vm._s(_vm.user.score))+\"</span> \"+((_vm.isOwner)?(\"<a href=\\\"/user/scores\\\" target=\\\"_blank\\\" class=\\\"score-log\\\" data-v-3d739100>积分详情&gt;&gt;</a>\"):\"<!---->\")+\"</div> \"+((_vm.isOwner)?(\"<ul class=\\\"operations\\\" data-v-3d739100><li data-v-3d739100><i class=\\\"iconfont icon-edit\\\" data-v-3d739100></i> <a href=\\\"/user/settings\\\" data-v-3d739100> 编辑资料</a></li> <li data-v-3d739100><i class=\\\"iconfont icon-message\\\" data-v-3d739100></i> <a href=\\\"/user/messages\\\" data-v-3d739100> 消息</a></li> <li data-v-3d739100><i class=\\\"iconfont icon-favorites\\\" data-v-3d739100></i> <a href=\\\"/user/favorites\\\" data-v-3d739100> 收藏</a></li></ul>\"):\"<!---->\")+\" \"+((_vm.isAdmin)?(\"<ul class=\\\"operations\\\" data-v-3d739100>\"+((_vm.user.forbidden)?(\"<li data-v-3d739100><i class=\\\"iconfont icon-forbidden\\\" data-v-3d739100></i> <a data-v-3d739100> 取消禁言</a></li>\"):(\"<li data-v-3d739100><i class=\\\"iconfont icon-forbidden\\\" data-v-3d739100></i> <a data-v-3d739100> 禁言</a></li>\"))+\"</ul>\"):\"<!---->\")+\"</div></div>\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"aside-actions\"},[])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"aside-actions\">\n    <!-- <a :href=\"createTopicUrl\" class=\"aside-actions-btn\">\n      <svg\n        viewBox=\"0 0 1065 1024\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"24\"\n        height=\"24\"\n        class=\"icon ic\"\n      >\n        <path\n          d=\"M331.329 566.55a7.454 7.454 0 00-1.649 2.903l-53.561 194.985a32.981 32.981 0 0032.057 41.754 31.398 31.398 0 008.443-1.187l194.787-52.77h.726a8.575 8.575 0 006.134-2.507l520.773-517.672a82.519 82.519 0 0024.01-59.366 100.725 100.725 0 00-30.342-70.844l-49.208-49.01a102.242 102.242 0 00-71.371-30.21 83.904 83.904 0 00-59.366 23.746L332.055 564.77c-.528.528 0 1.253-.726 1.78m656.985-384.824l-51.648 51.385-84.036-84.696 51.055-50.725c8.113-8.113 23.68-6.596 32.98 2.375l49.209 49.01a26.385 26.385 0 018.113 18.601 19.13 19.13 0 01-5.475 14.05M423.94 574.664l375.986-373.61 83.97 84.695-375.392 373.017zM355.405 725.85l27.177-98.944 72.558 72.56zm665.89-339.047a35.95 35.95 0 00-35.949 35.62v482.845a46.174 46.174 0 01-46.174 46.173H117.941a46.174 46.174 0 01-46.174-46.173V117.545a46.174 46.174 0 0146.174-46.174h528.886a35.752 35.752 0 100-71.107H112.136A112.136 112.136 0 000 112.4v798.145a112.136 112.136 0 00112.136 112.136h832.511a112.136 112.136 0 00112.532-112.136V422.423a35.95 35.95 0 00-35.95-35.62\"\n        ></path>\n      </svg>\n      <span>发布话题</span>\n    </a>\n    <a href=\"/article/create\" class=\"aside-actions-btn\">\n      <svg\n        viewBox=\"0 0 1034 1024\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"24\"\n        height=\"24\"\n        class=\"icon ic\"\n      >\n        <path\n          d=\"M978.15 494.17c-20.379 0-40.757 15.283-40.757 40.755v412.657H71.323V81.512H483.98c20.378 0 40.756-15.283 40.756-40.756 5.095-20.378-15.283-35.661-35.661-35.661H86.607C40.757 5.095 0 45.85 0 91.7v850.787C0 983.244 40.756 1024 86.607 1024h845.692c45.85 0 86.606-40.756 86.606-86.607V534.925c0-20.378-15.283-40.756-40.756-40.756z\"\n        ></path>\n        <path\n          d=\"M560.398 234.348c0 20.378 15.284 40.756 40.756 40.756H753.99V427.94c0 20.378 15.284 40.757 40.756 40.757s40.756-15.284 40.756-40.757V275.104h152.836c20.378 0 40.757-15.283 40.757-40.756s-15.284-40.756-40.757-40.756H835.502V40.756C835.502 20.378 820.22 0 794.746 0S753.99 15.284 753.99 40.756v152.836H601.154c-25.472 0-40.756 20.378-40.756 40.756z\"\n        ></path>\n      </svg>\n      <span>发表文章</span>\n    </a> -->\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    currentNodeId: {\n      type: Number,\n      default: 0\n    }\n  },\n  computed: {\n    createTopicUrl() {\n      let url = '/topic/create'\n      if (this.currentNodeId) {\n        url += '?nodeId=' + this.currentNodeId\n      }\n      return url\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.aside-actions {\n  background: #fff;\n  display: flex;\n  text-align: center;\n  /*padding: 10px;*/\n\n  .aside-actions-btn {\n    display: flex;\n    color: #000;\n    position: relative;\n    margin: 0 auto;\n    padding: 0.375rem 0.75rem;\n    font-weight: 500;\n    font-size: 1rem;\n    /*line-height: 2;*/\n    border-radius: 0.25rem;\n    border: 1px solid transparent;\n    background-color: #fff;\n    text-align: center;\n    vertical-align: middle;\n    cursor: pointer;\n    flex-direction: column;\n    align-items: center;\n    white-space: nowrap;\n    user-select: none;\n    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n      border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n\n    span {\n      margin-top: 5px;\n    }\n    &:hover {\n      color: #535d72;\n      font-weight: 600;\n    }\n  }\n}\n</style>\n","import mod from \"-!../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./PostBtns.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./PostBtns.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PostBtns.vue?vue&type=template&id=2af0916a&scoped=true&\"\nimport script from \"./PostBtns.vue?vue&type=script&lang=js&\"\nexport * from \"./PostBtns.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./PostBtns.vue?vue&type=style&index=0&id=2af0916a&lang=scss&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"2af0916a\",\n  \"3e909808\"\n  \n)\n\nexport default component.exports","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport PostBtns from '~/components/PostBtns'\nimport UserHelper from '~/common/UserHelper'\nexport default {\n  components: { PostBtns },\n  props: {\n    user: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {}\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.user.current\n    },\n    // 是否是主人态\n    isOwner() {\n      const current = this.$store.state.user.current\n      return this.user && current && this.user.id === current.id\n    },\n    isAdmin() {\n      return (\n        UserHelper.isOwner(this.currentUser) ||\n        UserHelper.isAdmin(this.currentUser)\n      )\n    }\n  },\n  methods: {\n    async forbidden() {\n      try {\n        await this.$axios.post('/api/user/forbidden', {\n          userId: this.user.id,\n          days: 7\n        })\n        this.user.forbidden = true\n        this.$toast.success('禁言成功')\n      } catch (e) {\n        this.$toast.error('禁言失败')\n      }\n    },\n    async removeForbidden() {\n      try {\n        await this.$axios.post('/api/user/forbidden', {\n          userId: this.user.id,\n          days: 0\n        })\n        this.user.forbidden = false\n        this.$toast.success('取消禁言成功')\n      } catch (e) {\n        this.$toast.error('取消禁言失败')\n      }\n    }\n  }\n}\n","import mod from \"-!../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./UserCenterSidebar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./UserCenterSidebar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserCenterSidebar.vue?vue&type=template&id=3d739100&scoped=true&\"\nimport script from \"./UserCenterSidebar.vue?vue&type=script&lang=js&\"\nexport * from \"./UserCenterSidebar.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./UserCenterSidebar.vue?vue&type=style&index=0&id=3d739100&lang=scss&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"3d739100\",\n  \"4754e832\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;AAAA;AACA;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACAA;AACA;AACA;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AADA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AA1BA;AA2BA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AADA;AACA;AAIA;AACA;AADA;AACA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAnHA;AACA;AAmHA;AACA;AACA;AADA;AAGA;AACA;AAvLA;;AC1UA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvBA;AACA;;;;;;;;ACDA;AACA;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AAAA;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;ACAA;AACA;AACA;;;;;ACFA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACmCA;AACA;AACA;AACA;AACA;AAFA;AADA;AAMA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AARA;AAPA;;ACrCA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAFA;AADA;AACA;AAKA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAIA;AACA;AAfA;AAgBA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAzBA;AA3BA;;AC5DA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}
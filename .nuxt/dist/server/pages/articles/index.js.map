{"version":3,"file":"pages/articles/index.js","sources":["webpack:///./pages/articles/index.vue?38d6","webpack:///./pages/articles/index.vue","webpack:///./pages/articles/index.vue?57d6","webpack:///./pages/articles/index.vue?10e0","webpack:///./components/SiteNotice.vue?3b09","webpack:///./components/SiteNotice.vue?cadb","webpack:///./components/LoadMore.vue?dfd1","webpack:///./components/SiteNotice.vue?f803","webpack:///SiteNotice.vue","webpack:///./components/SiteNotice.vue?17a9","webpack:///./components/SiteNotice.vue","webpack:///./components/LoadMore.vue?5c89","webpack:///./components/LoadMore.vue?c19e","webpack:///LoadMore.vue","webpack:///./components/LoadMore.vue?1ac2","webpack:///./components/LoadMore.vue","webpack:///./components/ArticleList.vue?e88a","webpack:///./components/ArticleList.vue","webpack:///./components/ArticleList.vue?2f43","webpack:///./components/ArticleList.vue?f07a"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"main\"},[_vm._ssrNode(\"<div class=\\\"container main-container is-white left-main size-320\\\" data-v-36a5077a>\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"left-container\\\" data-v-36a5077a>\",\"</div>\",[_c('load-more',{attrs:{\"init-data\":_vm.articlesPage,\"url\":\"/api/article/articles\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar results = ref.results;\nreturn [_c('article-list',{attrs:{\"articles\":results,\"show-ad\":true}})]}}])})],1),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"right-container\\\" data-v-36a5077a>\",\"</div>\",[_c('site-notice')],1)],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport ArticleList from '~/components/ArticleList'\nimport SiteNotice from '~/components/SiteNotice'\nimport LoadMore from '~/components/LoadMore'\n\nexport default {\n  components: {\n    ArticleList,\n    SiteNotice,\n    LoadMore\n  },\n  async asyncData({ $axios }) {\n    try {\n      const [articlesPage] = await Promise.all([\n        $axios.get('/api/article/articles')\n      ])\n      return {\n        articlesPage\n      }\n    } catch (e) {\n      console.error(e)\n    }\n  },\n  head() {\n    return {\n      title: this.$siteTitle('文章'),\n      meta: [\n        {\n          hid: 'description',\n          name: 'description',\n          content: this.$siteDescription()\n        },\n        { hid: 'keywords', name: 'keywords', content: this.$siteKeywords() }\n      ]\n    }\n  }\n}\n","import mod from \"-!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=36a5077a&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"36a5077a\",\n  \"73ab58a2\"\n  \n)\n\nexport default component.exports","// Exports\nmodule.exports = {};\n","import mod from \"-!../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./SiteNotice.vue?vue&type=style&index=0&id=05bf6a1c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./SiteNotice.vue?vue&type=style&index=0&id=05bf6a1c&lang=scss&scoped=true&\"","// Exports\nmodule.exports = {};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.config.siteNotification)?_c('div',{staticClass:\"widget\"},[_vm._ssrNode(\"<div class=\\\"widget-header\\\" data-v-05bf6a1c>公告</div> <div class=\\\"widget-content content notice-content\\\" data-v-05bf6a1c><p data-v-05bf6a1c>\"+(_vm._s(_vm.config.siteNotification))+\"</p></div>\")]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div v-if=\"config.siteNotification\" class=\"widget\">\n    <div class=\"widget-header\">公告</div>\n    <div class=\"widget-content content notice-content\">\n      <p v-html=\"config.siteNotification\"></p>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  computed: {\n    config() {\n      return this.$store.state.config.config\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.notice-content {\n  font-size: 80%;\n}\n</style>\n","import mod from \"-!../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./SiteNotice.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./SiteNotice.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SiteNotice.vue?vue&type=template&id=05bf6a1c&scoped=true&\"\nimport script from \"./SiteNotice.vue?vue&type=script&lang=js&\"\nexport * from \"./SiteNotice.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./SiteNotice.vue?vue&type=style&index=0&id=05bf6a1c&lang=scss&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"05bf6a1c\",\n  \"34323764\"\n  \n)\n\nexport default component.exports","import mod from \"-!../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./LoadMore.vue?vue&type=style&index=0&id=e767f9ac&lang=scss&scoped=true&\"; export default mod; export * from \"-!../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--7-oneOf-1-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/loaders/stylePostLoader.js!../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--7-oneOf-1-1!../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--7-oneOf-1-2!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./LoadMore.vue?vue&type=style&index=0&id=e767f9ac&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.loadMore),expression:\"loadMore\"}],staticClass:\"load-more\",attrs:{\"infinite-scroll-disabled\":\"disabled\",\"infinite-scroll-distance\":\"10\"}},[_vm._t(\"default\",null,{\"results\":_vm.results}),_vm._ssrNode(\" \"+((_vm.loading)?(\"<div class=\\\"load-more-loading\\\" data-v-e767f9ac><div class=\\\"loading-animation\\\" data-v-e767f9ac></div> <span class=\\\"load-more-text\\\" data-v-e767f9ac>加载中...</span></div>\"):\"<!---->\"))],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    v-infinite-scroll=\"loadMore\"\n    class=\"load-more\"\n    infinite-scroll-disabled=\"disabled\"\n    infinite-scroll-distance=\"10\"\n  >\n    <slot :results=\"results\" />\n    <div v-if=\"loading\" class=\"load-more-loading\">\n      <div class=\"loading-animation\" />\n      <span class=\"load-more-text\">加载中...</span>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    // 请求URL\n    url: {\n      type: String,\n      required: true\n    },\n    // 请求参数\n    params: {\n      type: Object,\n      default() {\n        return {}\n      }\n    },\n    // 初始化数据\n    initData: {\n      type: Object,\n      default() {\n        return {\n          results: [],\n          page: ''\n        }\n      }\n    },\n    tagId: {\n      type: Number,\n      required: false,\n      default() {\n        return -1\n      }\n    }\n  },\n  data() {\n    return {\n      page: 1, // 分页标识\n      results: this.initData.results || [], // 列表数据\n      hasMore: true, // 是否有更多数据\n      loading: false // 是否正在加载中\n    }\n  },\n  computed: {\n    // 是否禁言自动加载\n    disabled() {\n      return this.loading || !this.hasMore\n    }\n  },\n  mounted() {\n    // console.log('more mounted')\n    this.loadMore()\n  },\n  methods: {\n    async loadMore() {\n      // console.log('loadMore')\n      this.loading = true\n      try {\n        const _params = Object.assign(this.params || {}, {\n          page: this.page,\n          tagId: this.tagId\n        })\n        const ret = await this.$axios.get(this.url, {\n          params: _params\n        })\n        this.hasMore = this.checkNextPage(ret.page)\n        if (ret.results && ret.results.length) {\n          ret.results.forEach((item) => {\n            this.results.push(item)\n          })\n        } else {\n          this.hasMore = false\n        }\n      } catch (err) {\n        this.hasMore = false\n        console.error(err)\n      } finally {\n        this.loading = false\n      }\n    },\n    /**\n     * 在results最前面加一条数据\n     */\n    unshiftResults(item) {\n      if (item) {\n        this.results.unshift(item)\n      }\n    },\n    /**\n     * 在results最后面加一条数据\n     */\n    pushResults(item) {\n      if (item) {\n        this.results.push(item)\n      }\n    },\n    checkNextPage(page) {\n      if (page && page.total > page.limit) {\n        if (page.total / page.limit >= this.page) {\n          this.page++\n          return true\n        }\n      }\n      return false\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.load-more {\n  .load-more-loading {\n    text-align: center;\n    font-size: 12px;\n\n    .loading-animation {\n      height: 12px;\n      width: 12px;\n    }\n\n    .load-more-text {\n      color: #000;\n      margin-left: 5px;\n    }\n  }\n}\n</style>\n","import mod from \"-!../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./LoadMore.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./LoadMore.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoadMore.vue?vue&type=template&id=e767f9ac&scoped=true&\"\nimport script from \"./LoadMore.vue?vue&type=script&lang=js&\"\nexport * from \"./LoadMore.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  var style0 = require(\"./LoadMore.vue?vue&type=style&index=0&id=e767f9ac&lang=scss&scoped=true&\")\nif (style0.__inject__) style0.__inject__(context)\n\n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"e767f9ac\",\n  \"7687ce00\"\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',{staticClass:\"article-list\"},[_vm._ssrNode((_vm._ssrList((_vm.articles),function(article,index){return (\"<li data-v-3cde4248>\"+((_vm.showAd && index !== 0 && index % 3 === 0)?(\"<div data-v-3cde4248></div>\"):\"<!---->\")+\" <article itemscope=\\\"itemscope\\\" itemtype=\\\"http://schema.org/BlogPosting\\\" class=\\\"article-item\\\" data-v-3cde4248><h1 itemprop=\\\"headline\\\" class=\\\"article-title\\\" data-v-3cde4248><a\"+(_vm._ssrAttr(\"href\",'/article/' + article.articleId))+\" data-v-3cde4248>\"+_vm._ssrEscape(_vm._s(article.title))+\"</a></h1> <div itemprop=\\\"description\\\" class=\\\"article-summary\\\" data-v-3cde4248>\"+_vm._ssrEscape(\"\\n        \"+_vm._s(article.summary)+\"\\n      \")+\"</div> <div class=\\\"article-meta\\\" data-v-3cde4248><span class=\\\"article-meta-item\\\" data-v-3cde4248>\\n          由\\n          <a\"+(_vm._ssrAttr(\"href\",'/user/' + article.user.id))+\" itemprop=\\\"author\\\" itemscope=\\\"itemscope\\\" itemtype=\\\"http://schema.org/Person\\\" class=\\\"article-author\\\" data-v-3cde4248><span itemprop=\\\"name\\\" data-v-3cde4248>\"+_vm._ssrEscape(_vm._s(article.user.nickname))+\"</span></a>发布于\\n          <time\"+(_vm._ssrAttr(\"datetime\",_vm._f(\"formatDate\")(article.createTime,'yyyy-MM-ddTHH:mm:ss')))+\" itemprop=\\\"datePublished\\\" data-v-3cde4248>\"+_vm._ssrEscape(_vm._s(_vm._f(\"prettyDate\")(article.createTime)))+\"</time></span> \"+((article.tags && article.tags.length > 0)?(\"<span class=\\\"article-meta-item\\\" data-v-3cde4248>\"+(_vm._ssrList((article.tags),function(tag){return (\"<span class=\\\"article-tag tag\\\" data-v-3cde4248><a\"+(_vm._ssrAttr(\"href\",'/articles/' + tag.tagId))+\" data-v-3cde4248>\"+_vm._ssrEscape(_vm._s(tag.tagName))+\"</a></span>\")}))+\"</span>\"):\"<!---->\")+\" \"+((article.status === 2)?(\"<span class=\\\"article-meta-item\\\" data-v-3cde4248><a href=\\\"javascript:void(0)\\\" style=\\\"cursor: default; text-decoration: none; color: green; font-size: 12px\\\" data-v-3cde4248><i class=\\\"iconfont icon-shenhe\\\" data-v-3cde4248></i> 审核中</a></span>\"):\"<!---->\")+\"</div></article></li>\")})))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  props: {\n    articles: {\n      type: Array,\n      default() {\n        return []\n      },\n      required: false\n    },\n    showAd: {\n      type: Boolean,\n      default: false\n    }\n  }\n}\n","import mod from \"-!../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./ArticleList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js??ref--2-0!../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./ArticleList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArticleList.vue?vue&type=template&id=3cde4248&scoped=true&\"\nimport script from \"./ArticleList.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleList.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"3cde4248\",\n  \"4e9e9d9f\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAHA;AACA;AAIA;AAAA;AAAA;AACA;AACA;AAGA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAHA;AAKA;AAAA;AAAA;AAAA;AARA;AAWA;AACA;AA/BA;;AChCA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrBA;AACA;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AAAA;;;;;;;ACAA;AACA;;;;;;;;;;;ACDA;AACA;AACA;;;;;;;;;;;;;;ACQA;AACA;AACA;AACA;AACA;AACA;AAJA;AADA;;ACVA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACvBA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;ACAA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACcA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AALA;AAMA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AARA;AASA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AANA;AAvBA;AACA;AA8BA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AALA;AAMA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAKA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAFA;AACA;AAGA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AApDA;AAlDA;;AChBA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACvBA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AALA;AAOA;AACA;AACA;AAFA;AARA;AADA;;ACtEA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}
(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{299:function(e,t,n){"use strict";var o=n(91),r=n(92),c=(n(208),function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,[{key:"getStorage",value:function(){return window.localStorage}},{key:"setConfigVersion",value:function(e){this.setItem("vcode",e)}},{key:"getConfigVersion",value:function(){return this.getItem("vcode")}},{key:"getCurrentCity",value:function(){return this.getItem("city")}},{key:"setCurrentCity",value:function(e){this.setItem("city",e)}},{key:"setSubwayAndRegion",value:function(e,t){this.setItem(e+"_subway_region",t)}},{key:"getSubwayAndRegion",value:function(e){return this.getItem(e+"_subway_region")}},{key:"getStationList",value:function(e,t,n){return this.getItem(e+"_"+t+"_"+n)}},{key:"setStationList",value:function(e,t,n,o){this.setItem(e+"_"+t+"_"+n,o)}},{key:"getItem",value:function(e){var t=this.getStorage();try{return JSON.parse(t.getItem(e))}catch(e){return null}}},{key:"setItem",value:function(e,t){this.getStorage().setItem(e,JSON.stringify(t))}},{key:"removeItem",value:function(e){this.getStorage().removeItem(e)}},{key:"clear",value:function(){this.getStorage().clear()}}]),e}());t.a=new c},302:function(e,t,n){"use strict";n(69);var o=n(91),r=n(92),c=n(208),l=n(382),d=function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,[{key:"convertLatlonToGeohash",value:function(e){return l.encode(e[0],e[1],11)}},{key:"getLatlonFromGeoRequest",value:function(e){var t="",n="",o="";if(e.geocodes.length>0){var r=e.geocodes[0];if(void 0!==r.location){o=r.district;var c=r.location.split(",");t=this.convertLatlonToGeohash(c),n=r.location}}return{geohash:t,latlon:n,district:o}}},{key:"requestAmapGeo",value:function(e,address,t){var n="/v3/geocode/geo?key=06a39860cdf741c5dc5ba1242112ab72&city="+c.a.getCity()+"&address="+address;e.get(n).then((function(e){})).catch((function(e){t&&t(e)}))}},{key:"hasRole",value:function(e,t){if(!e||!e.roles||!e.roles.length)return!1;for(var i=0;i<e.roles.length;i++)if(e.roles[i]===t)return!0;return!1}},{key:"hasAnyRole",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(!n||!n.length)return!1;for(var i=0;i<n.length;i++)if(this.hasRole(e,n[i]))return!0;return!1}},{key:"isOwner",value:function(e){return this.hasRole(e,"owner")}},{key:"isAdmin",value:function(e){return this.hasRole(e,"admin")}}]),e}();t.a=new d},335:function(e,t,n){"use strict";n(23),n(24),n(9);var o=n(91),r=n(92),c=function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,[{key:"homeItemToJsonString",value:function(e,address,t){return{content_type:0,from_type:0,city:e,address:address,address_geo:address,tags:t}}},{key:"loveItemToJsonString",value:function(){return{}}},{key:"linkTo",value:function(path){window.location=path}},{key:"toSignin",value:function(e){e||(e=window.location.pathname),this.linkTo("/user/signin?ref="+encodeURIComponent(e))}},{key:"isSigninUrl",value:function(e){return"/user/signin"===e}},{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"isDate",value:function(e){return"[object Date]"==={}.toString.call(e)&&"Invalid Date"!==e.toString()&&!isNaN(e)}},{key:"isElement",value:function(e){return!(!e||!e.nodeName||1!==e.nodeType)}},{key:"isFunction",value:function(e){return"[object Function]"===Object.prototype.toString.call(e)}},{key:"isNumber",value:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&isFinite(e)}},{key:"isObject",value:function(e){return"[object Object]"===Object.prototype.toString.call(e)}},{key:"isString",value:function(e){return"[object String]"===Object.prototype.toString.call(e)}},{key:"isBoolean",value:function(e){return"boolean"==typeof e}}]),e}();t.a=new c},390:function(e,t){},391:function(e,t){},454:function(e,t,n){"use strict";(function(e){var o=n(455),r=n.n(o),script={name:"Arrow",props:{borderColor:String,direction:{type:String,validator:e=>["up","down","right"].includes(e)}}};function c(template,style,script,e,t,n,o,r,c,l){"boolean"!=typeof o&&(c=r,r=o,o=!1);const d="function"==typeof script?script.options:script;let v;if(template&&template.render&&(d.render=template.render,d.staticRenderFns=template.staticRenderFns,d._compiled=!0,t&&(d.functional=!0)),e&&(d._scopeId=e),n?(v=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),style&&style.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(n)},d._ssrRegister=v):style&&(v=o?function(e){style.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){style.call(this,r(e))}),v)if(d.functional){const e=d.render;d.render=function(t,n){return v.call(n),e(t,n)}}else{const e=d.beforeCreate;d.beforeCreate=e?[].concat(e,v):[v]}return script}const l="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function d(e){return(e,style)=>function(e,t){const n=l?t.media||"default":e,style=f[n]||(f[n]={ids:new Set,styles:[]});if(!style.ids.has(e)){style.ids.add(e);let code=t.source;if(t.map&&(code+="\n/*# sourceURL="+t.map.sources[0]+" */",code+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),style.element||(style.element=document.createElement("style"),style.element.type="text/css",t.media&&style.element.setAttribute("media",t.media),void 0===v&&(v=document.head||document.getElementsByTagName("head")[0]),v.appendChild(style.element)),"styleSheet"in style.element)style.styles.push(code),style.element.styleSheet.cssText=style.styles.filter(Boolean).join("\n");else{const e=style.ids.size-1,t=document.createTextNode(code),n=style.element.childNodes;n[e]&&style.element.removeChild(n[e]),n.length?style.element.insertBefore(t,n[e]):style.element.appendChild(t)}}}(e,style)}let v;const f={};const h=c({render:function(){var e=this.$createElement;return(this._self._c||e)("i",{staticClass:"vcs__arrow",class:this.direction,style:{borderColor:this.borderColor}})},staticRenderFns:[]},(function(e){e&&e("data-v-d981e8f2_0",{source:".vcs__arrow{border-radius:1px;border:solid #ccc;border-width:0 3px 3px 0;cursor:pointer;display:inline-block;padding:3px;transition:150ms all linear;transform-origin:50% 50%;font-size:12px}.vcs__arrow.up{transform:rotate(-135deg);-webkit-transform:rotate(-135deg);margin-bottom:-2px}.vcs__arrow.down{transform:rotate(45deg);-webkit-transform:rotate(45deg);margin-bottom:1px}.vcs__arrow.right{transform:rotate(-45deg);-webkit-transform:rotate(-45deg)}",map:void 0,media:void 0})}),script,void 0,!1,void 0,!1,d,void 0,void 0),m=e=>e.every(({label:label,options:e,value:t})=>label&&"string"==typeof label&&(t||e&&Array.isArray(e)&&m(e)));const y=c({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"vcs__option",class:{"vcs__option--active":e.active,"vcs__option--disabled":e.disabled,"vsc__option--focused":e.focused},on:{mouseenter:function(t){return e.$emit("openMenu",e.value,e.options,e.index,!1)},click:e.handleSelection,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])||"button"in t&&2!==t.button?null:e.$emit("openMenu",e.value,e.options,e.index,!0)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.$emit("closeMenu")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.$emit("nextOption")},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.$emit("prevOption")}]}},[n("span",[e._v(e._s(e.label))]),e._v(" "),e.isLeaf?e._e():n("arrow",{attrs:{direction:"right"}})],1)},staticRenderFns:[]},(function(e){e&&e("data-v-1bbce494_0",{source:".vcs__option{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:5px 10px;cursor:pointer;transition:background .2s linear;color:inherit;font-family:inherit;font-size:100%;line-height:1.15;overflow:visible;-webkit-appearance:button}.vcs__option--active{background-color:#eee}.vcs__option span{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-right:10px}.vcs__option:focus{outline:0}.vsc__option--focused{background:#ddd;outline:0}",map:void 0,media:void 0})}),{name:"Option",components:{Arrow:h},props:{active:{type:Boolean,default:!1},label:String,onSelect:Function,options:{type:Array,validator:e=>m(e)},value:{type:[String,Number]},selectable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},focused:{type:Boolean,default:!1},index:Number},methods:{handleSelection(){const{disabled:e,selectable:t,onSelect:n,value:o,label:label}=this.$props;t&&!e&&n({label:label,value:o})}},computed:{isLeaf(){const{options:e}=this.$props;return 0===(e||[]).length}}},void 0,!1,void 0,!1,d,void 0,void 0);const _=c({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vcs__select-menu",class:{"vcs__select-menu__not-main":e.notMain}},[e._l(e.options,(function(option,t){return n("Option",{key:option.value,ref:"options",refInFor:!0,attrs:{active:option.value===e.nextMenu.value,disabled:option.disabled,focused:t===e.selectedOption,index:t,label:option.label,onSelect:e.onSelect,options:option.options,selectable:option.selectable,value:option.value},on:{openMenu:e.handleOpenNextMenu,closeMenu:e.handleCloseMenu,nextOption:function(t){return e.moveOption(!0)},prevOption:function(t){return e.moveOption(!1)}}})})),e._v(" "),n("transition",{attrs:{name:"vcs__fade"}},[e.nextMenu.isOpen?n("SelectMenu",{ref:"childMenu",attrs:{notMain:!0,onSelect:e.onSelect,options:e.nextMenu.options,withKeyboard:e.nextMenu.withKeyboard}}):e._e()],1)],2)},staticRenderFns:[]},(function(e){e&&e("data-v-185990e2_0",{source:".vcs__select-menu{border-radius:4px;border:1px solid #ccc;display:flex;flex-direction:column;margin-top:2px;padding:5px 0;position:relative;text-align:left;width:100%;background:#fff;position:absolute;left:0;top:calc(100% + 2px);margin-top:0}.vcs__select-menu__not-main{position:absolute;left:calc(100% - 1px);top:-1px;margin-top:0;width:auto}",map:void 0,media:void 0})}),{name:"SelectMenu",components:{Option:y},props:{notMain:{type:Boolean,default:!1},onSelect:{type:Function,required:!0},options:{type:Array,default:()=>[],validator:e=>m(e)},withKeyboard:{type:Boolean,default:!1}},data(){const{options:e,withKeyboard:t}=this.$props;return{nextMenu:{isOpen:!1,options:!1,value:"",withKeyboard:!1},selectedOption:t?0:null,optionsLength:e.length}},mounted(){this.$props.withKeyboard&&this.$refs.options[0].$el.focus()},methods:{handleOpenNextMenu(e,t,n,o=!1){this.selectedOption=n,this.$refs.options[n].$el.focus(),t&&this.nextMenu.value!==e&&(this.nextMenu={isOpen:!0,options:t,value:e,withKeyboard:o}),t&&this.$refs.childMenu&&this.$refs.childMenu.resetNextMenu(),t||this.resetNextMenu()},handleCloseMenu(){this.$parent&&this.$parent.resetNextMenu&&this.$parent.resetNextMenu()},resetNextMenu(){this.nextMenu={isOpen:!1,options:[],value:""},this.$nextTick(()=>{this.selectedOption>=0&&this.$refs.options[this.selectedOption]&&this.$refs.options[this.selectedOption].$el.focus()})},moveOption(e=!1){const{selectedOption:t,optionsLength:n}=this;let o=e?t+1:t-1;o=o>=0?o:n-1,o%=n,this.selectedOption=o,this.$refs.options[o].$el.focus()}},watch:{options(){this.resetNextMenu(),this.$props.withKeyboard||(this.selectedOption=null)}}},void 0,!1,void 0,!1,d,void 0,void 0);const w=c({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.handleClose,expression:"handleClose"}],staticClass:"vcs",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.handleClose(t)}}},[n("div",{staticClass:"vcs__picker",attrs:{tabindex:"0"},on:{click:function(){return e.handleOpen(!1)},keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleOpen(!0)}}},[n("input",{attrs:{disabled:"",placeholder:e.placeholder},domProps:{value:e.value}}),e._v(" "),n("transition",{attrs:{name:"vcs__fade"}},[e.value?n("div",{staticClass:"vcs__cross"},[n("button",{on:{click:function(t){return t.stopPropagation(),e.$emit("clear")}}},[e._v("\n          ×\n        ")])]):e._e()]),e._v(" "),n("div",{staticClass:"vcs__arrow-container"},[n("Arrow",{attrs:{borderColor:"#ccc",direction:e.isOpen?"up":"down"}})],1)],1),e._v(" "),n("transition",{attrs:{name:"vcs__fade"}},[e.isOpen?n("SelectMenu",{attrs:{onSelect:e.handleSelect,options:e.options,withKeyboard:e.withKeyboard}}):e._e()],1)],1)},staticRenderFns:[]},(function(e){e&&e("data-v-737952eb_0",{source:"button{padding:0;background:0 0;border:none;text-align:left;font-size:unset}.vcs{position:relative}.vcs__picker{position:relative;display:flex;width:100%}.vcs__picker input{align-items:center;border-radius:4px;border:1px solid #ccc;box-shadow:none;cursor:pointer;display:flex;flex-direction:row;font-size:inherit;height:30px;justify-content:space-between;overflow:hidden;padding:0 55px 0 10px;text-align:center;text-align:left;text-overflow:ellipsis;user-select:none;white-space:nowrap;width:100%;-webkit-appearance:none}.vcs__picker input:disabled{background:inherit;opacity:1}.vcs__arrow-container{border-left:1px solid #ccc;cursor:pointer;padding-left:10px;margin-left:10px;position:absolute;right:11px;top:50%;transform:translate(0,-50%)}.vcs__cross{position:absolute;right:33px;top:50%;transform:translate(0,-50%)}.vcs__cross button{-webkit-appearance:none;background:0 0;border:none;color:#bbb;cursor:pointer;font-size:18px;opacity:.7;padding:0 3px;transition:opacity .2s linear}.vcs__cross button:hover{opacity:1}.vcs__fade-enter-active,.vcs__fade-leave-active{transition:opacity .2s}.vcs__fade-enter,.vcs__fade-leave-to{opacity:0}",map:void 0,media:void 0})}),{name:"VueCascaderSelect",components:{Arrow:h,SelectMenu:_},directives:{clickOutside:r.a.directive},props:{placeholder:{type:String,default:"Please select..."},options:{type:Array,required:!0,validator:e=>m(e)},value:{type:String,required:!0}},data:()=>({isOpen:!1,withKeyboard:!1}),methods:{handleSelect(option){this.$emit("select",option)},handleOpen(e=!1){this.isOpen=!this.isOpen,this.withKeyboard=e},handleClose(){this.isOpen=!1}},watch:{value(){this.isOpen=!1}}},void 0,!1,void 0,!1,d,void 0,void 0),x=function(e){x.installed||(x.installed=!0,e.component("VueCascaderSelect",w))},k={install:x};let C=null;"undefined"!=typeof window?C=window.Vue:void 0!==e&&(C=e.Vue),C&&C.use(k),w.install=x,t.a=w}).call(this,n(31))},455:function(e,t,n){e.exports=function(){var e="undefined"!=typeof window,t="undefined"!=typeof navigator,n=e&&("ontouchstart"in window||t&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"];function i(e){var t=e.event,n=e.handler;(0,e.middleware)(t)&&n(t)}function o(e,t){var o=function(e){var t="function"==typeof e;if(!t&&"object"!=typeof e)throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||function(e){return e},events:e.events||n,isActive:!(!1===e.isActive),detectIframe:!(!1===e.detectIframe)}}(t.value),r=o.handler,c=o.middleware,a=o.detectIframe;if(o.isActive){if(e["__v-click-outside"]=o.events.map((function(t){return{event:t,srcTarget:document.documentElement,handler:function(t){return function(e){var t=e.el,n=e.event,o=e.handler,r=e.middleware,c=n.path||n.composedPath&&n.composedPath();(c?c.indexOf(t)<0:!t.contains(n.target))&&i({event:n,handler:o,middleware:r})}({el:e,event:t,handler:r,middleware:c})}}})),a){var l={event:"blur",srcTarget:window,handler:function(t){return function(e){var t=e.el,n=e.event,o=e.handler,r=e.middleware;setTimeout((function(){var e=document.activeElement;e&&"IFRAME"===e.tagName&&!t.contains(e)&&i({event:n,handler:o,middleware:r})}),0)}({el:e,event:t,handler:r,middleware:c})}};e["__v-click-outside"]=[].concat(e["__v-click-outside"],[l])}e["__v-click-outside"].forEach((function(t){var n=t.event,i=t.srcTarget,o=t.handler;return setTimeout((function(){e["__v-click-outside"]&&i.addEventListener(n,o,!1)}),0)}))}}function r(e){(e["__v-click-outside"]||[]).forEach((function(e){return e.srcTarget.removeEventListener(e.event,e.handler,!1)})),delete e["__v-click-outside"]}var c=e?{bind:o,update:function(e,t){var n=t.value,i=t.oldValue;JSON.stringify(n)!==JSON.stringify(i)&&(r(e),o(e,{value:n}))},unbind:r}:{};return{install:function(e){e.directive("click-outside",c)},directive:c}}()},565:function(e,t,n){"use strict";n.r(t);n(18),n(69),n(51),n(70),n(23),n(24),n(17),n(9),n(30);var o=n(41),r=(n(16),n(2)),c=n(454),l=n(335),d=n(208),v=n(302),f=n(291),h=n(299),m={middleware:"authenticated",components:{VueCascaderSelect:c.a,PostTweets:f.a},asyncData:function(e){return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$axios,e.query,e.store;case 1:case"end":return t.stop()}}),t)})))()},data:function(){return{publishing:!1,captchaId:"",captchaUrl:"",captchaCode:"",imageList:[],postForm:{nodeId:2,title:"",tags:[],content:"",address:""},subwaysAndRegions:[],value:"",geoStationId:-1,options:[{label:"Frontend",disabled:!0,options:[{label:"Vue",value:"Vue"},{label:"React",value:"React"},{label:"Svelte",value:"Svelte"}]},{label:"Backend",value:"Backend",disabled:!0,options:[{label:"Ruby on Rails",value:"Ruby on Rails"},{label:"NodeJS",value:"NodeJS"},{label:"Elixir",value:"Elixir"}]}]}},computed:{user:function(){return this.$store.state.user.current},config:function(){return this.$store.state.config.config}},mounted:function(){this.showCaptcha(),this.checkConfig()},methods:{checkConfig:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,c,l,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=d.a.getCity(),r=h.a.getSubwayAndRegion(n)){t.next=12;break}return t.next=5,Promise.all([e.$axios.get("/api/topic/subway",{params:{city:n}})]);case 5:c=t.sent,l=Object(o.a)(c,1),v=l[0],e.subwaysAndRegions=v,v&&v.length>0&&h.a.setSubwayAndRegion(n,v),t.next=13;break;case 12:e.subwaysAndRegions=r;case 13:e.checkSubwayStationData(),e.formatSubwaySelectData();case 15:case"end":return t.stop()}}),t)})))()},showMetraSelectDiv:function(){return"北京"===d.a.getCity()||"武汉"===d.a.getCity()},onImageUpload:function(e){this.imageList=e},checkRentAddress:function(e,t){""!==this.postForm.address&&v.a.requestAmapGeo(this.$axios,this.postForm.address,(function(n){var o=v.a.getLatlonFromGeoRequest(n);""===o.geohash||""===o.latlon?t&&t():e&&e(o.latlon,o.geohash,o.district)}))},submitTopic:function(e,t,n){var o=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var c,v,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,c=""!==o.value?[o.value]:[],v=l.a.homeItemToJsonString("北京",o.postForm.address,c.join(",")),r.next=5,o.$axios.post("/api/topic/rent/create",{city:d.a.getCity(),captchaId:o.captchaId,captchaCode:o.captchaCode,nodeId:o.postForm.nodeId,title:o.postForm.title,content:o.postForm.content,tags:c.join(","),imageList:o.imageList.toString(),extraData:JSON.stringify(v),latlon:e,geoHash:t,district:n,geoStationId:o.geoStationId});case 5:f=r.sent,o.$toast.success("提交成功！ 您可以进入详情页，点击分享按钮，实现一键分享入微信群",{duration:2e3,onComplete:function(){d.a.linkTo("/rent/"+f.topicId)}}),r.next=16;break;case 9:return r.prev=9,r.t0=r.catch(0),console.log(r.t0),r.next=14,o.showCaptcha();case 14:o.publishing=!1,o.$toast.error("提交失败："+(r.t0.message||r.t0));case 16:case"end":return r.stop()}}),r,null,[[0,9]])})))()},submitCreate:function(){var e=this;this.publishing?this.$toast.error("正在提交中"):this.postForm.title?this.postForm.address?(this.publishing=!0,this.checkRentAddress((function(t,n,o){var r="";r=o.includes("区")&&o.length>2?o.substring(0,o.length-1):o,e.submitTopic(t,n,r)}),(function(){e.publishing=!1,e.$toast.error("提交失败，请输入有效地址。例如：[西二旗地铁站] 或者 [兰园小区]"),console.log("checkRentAddress error:"+e.postForm.address)}))):this.$toast.error("请输入地点"):this.$toast.error("请输入标题")},checkSubwayStationData:function(){var e=d.a.getCity(),t=h.a.getSubwayAndRegion(e);if(t){var n=[];t.forEach((function(t){0===t.dtype&&(h.a.getStationList(e,0,t.dataId)||n.push(t.dataId))})),n.length>0&&this.requestStationList(0,n,e)}},requestStationList:function(e,t,n){var o=this,r={dtype:e,dataIds:t.toString(),city:n};this.$axios.get("/api/topic/stationlist2",{params:r}).then((function(t){t&&t.length>0&&(t.forEach((function(t){t.stationlist&&h.a.setStationList(n,e,t.dataId,t.stationlist)})),o.formatSubwaySelectData())})).catch((function(e){console.log("create page, requestStationList error:"+JSON.stringify(e))}))},showCaptcha:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.config.topicCaptcha){t.next=12;break}return t.prev=1,t.next=4,e.$axios.get("/api/captcha/request",{params:{captchaId:e.captchaId||""}});case 4:n=t.sent,e.captchaId=n.captchaId,e.captchaUrl=n.captchaUrl,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e.$toast.error(t.t0.message||t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},onClearSubway:function(e){this.value="",this.geoStationId=-1},onSelectSubway:function(e){if(e.value){var t=e.value.split("-");3===t.length&&(this.geoStationId=t[0],this.value=t[1]+"-"+t[2])}},formatSubwaySelectData:function(){var e=[],t=d.a.getCity(),n=this.subwaysAndRegions;n&&n.forEach((function(n){if(0===n.dtype){var o=[],r=h.a.getStationList(t,0,n.dataId);r&&(r.forEach((function(e){o.push({label:e.name,value:e.geoStationId+"-"+n.name+"-"+e.name})})),e.push({label:n.name,value:n.name,disabled:!0,options:o}))}})),this.options=e},tweetsCreated:function(e){this.$refs.tweetsLoadMore.unshiftResults(e)}},head:function(){return{title:this.$siteTitle("租房")}}},y=n(29),component=Object(y.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"main"},[n("div",{staticClass:"container main-container is-white left-main"},[n("client-only",[n("div",{staticClass:"left-container"},[n("div",{staticClass:"widget"},[n("div",{staticClass:"widget-header"},[n("nav",{staticClass:"breadcrumb"},[n("ul",[n("li",[n("a",{attrs:{href:"/"}},[e._v("首页")])]),e._v(" "),n("li",[n("a",{attrs:{href:"/user/"+e.user.id+"?tab=topics"}},[e._v(e._s(e.user.nickname))])]),e._v(" "),n("li",{staticClass:"is-active"},[n("a",{attrs:{href:"#","aria-current":"page"}},[e._v("租房")])])])])]),e._v(" "),n("div",{staticClass:"widget-content"},[n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[e._v("标题:")]),e._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.postForm.title,expression:"postForm.title"}],staticClass:"input is-small",attrs:{type:"text",placeholder:"格式：[转租/直租/求租/找室友]出租xx区xx地x室xx元，[紧邻地铁站]"},domProps:{value:e.postForm.title},on:{input:function(t){t.target.composing||e.$set(e.postForm,"title",t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[e._v("详情:")]),e._v(" "),n("div",{staticClass:"control"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.postForm.content,expression:"postForm.content"}],staticClass:"textarea is-small",attrs:{placeholder:"详情内容建议包含：个人是否为租客、是否个人房源、房租位置、大小、户型、房客情况、价格、租期可否续租，联系方式等等"},domProps:{value:e.postForm.content},on:{input:function(t){t.target.composing||e.$set(e.postForm,"content",t.target.value)}}})])]),e._v(" "),n("div",{staticClass:"field"},[n("div",{staticClass:"control"},[n("post-tweets",{attrs:{"on-image-upload-call-back":e.onImageUpload}})],1)]),e._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[e._v("地址标签:")]),e._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.postForm.address,expression:"postForm.address"}],staticClass:"input is-small",attrs:{type:"text",placeholder:"小区名称或标志性地点（请写正确，方便距离计算，搜索匹配）"},domProps:{value:e.postForm.address},on:{input:function(t){t.target.composing||e.$set(e.postForm,"address",t.target.value)}}})])]),e._v(" "),n("div",{staticStyle:{position:"relative","z-index":"100","margin-top":"20px","margin-bottom":"20px",width:"60%"}},[e.showMetraSelectDiv()?n("vue-cascader-select",{staticClass:"is-small",attrs:{options:e.options,placeholder:"选择就近地铁站",value:e.value},on:{clear:e.onClearSubway,select:e.onSelectSubway}}):e._e()],1),e._v(" "),e.captchaUrl?n("div",{staticClass:"field is-horizontal"},[n("div",{staticClass:"field control has-icons-left"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.captchaCode,expression:"captchaCode"}],staticClass:"input",staticStyle:{"max-width":"150px","margin-right":"20px"},attrs:{type:"text",placeholder:"验证码"},domProps:{value:e.captchaCode},on:{input:function(t){t.target.composing||(e.captchaCode=t.target.value)}}}),e._v(" "),n("span",{staticClass:"icon is-small is-left"},[n("i",{staticClass:"iconfont icon-captcha"})])]),e._v(" "),n("div",{staticClass:"field"},[n("a",{on:{click:e.showCaptcha}},[n("img",{staticStyle:{height:"40px"},attrs:{src:e.captchaUrl}})])])]):e._e(),e._v(" "),n("div",{staticClass:"field is-grouped"},[n("div",{staticClass:"control"},[n("a",{staticClass:"button is-success",class:{"is-loading":e.publishing},attrs:{disabled:e.publishing},on:{click:e.submitCreate}},[e._v("发表")])])])])])]),e._v(" "),n("div",{staticClass:"right-container"})])],1)])}),[],!1,null,"e3e0fc7c",null);t.default=component.exports}}]);
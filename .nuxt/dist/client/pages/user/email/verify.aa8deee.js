(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{202:function(e,t,r){},203:function(e,t,r){},211:function(e,t,r){"use strict";var n=r(202);r.n(n).a},212:function(e,t,r){"use strict";var n=r(203);r.n(n).a},213:function(e,t,r){"use strict";r(16);var n=r(2),c=(r(128),{props:{currentNodeId:{type:Number,default:0}},computed:{createTopicUrl:function(){var e="/topic/create";return this.currentNodeId&&(e+="?nodeId="+this.currentNodeId),e}}}),o=(r(211),r(29)),d=Object(o.a)(c,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"aside-actions"})}),[],!1,null,"2af0916a",null).exports,v=r(66),l={components:{PostBtns:d},props:{user:{type:Object,required:!0}},data:function(){return{}},computed:{currentUser:function(){return this.$store.state.user.current},isOwner:function(){var e=this.$store.state.user.current;return this.user&&e&&this.user.id===e.id},isAdmin:function(){return v.a.isOwner(this.currentUser)||v.a.isAdmin(this.currentUser)}},methods:{forbidden:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/api/user/forbidden",{userId:e.user.id,days:7});case 3:e.user.forbidden=!0,e.$toast.success("禁言成功"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.$toast.error("禁言失败");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},removeForbidden:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.post("/api/user/forbidden",{userId:e.user.id,days:0});case 3:e.user.forbidden=!1,e.$toast.success("取消禁言成功"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.$toast.error("取消禁言失败");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},f=(r(212),Object(o.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"right-container"},[e.isOwner?r("post-btns"):e._e(),e._v(" "),r("div",{staticClass:"widget"},[r("div",{staticClass:"widget-header"},[e._v("\n      "+e._s(e.user.nickname)+"\n    ")]),e._v(" "),r("div",{staticClass:"widget-content"},[r("img",{staticClass:"img-avatar",attrs:{src:e.user.smallAvatar}}),e._v(" "),e.user.description?r("div",{staticClass:"description"},[r("p",[e._v(e._s(e.user.description))])]):e._e(),e._v(" "),r("div",{staticClass:"score"},[r("i",{staticClass:"iconfont icon-score"}),e._v(" "),r("span",[e._v(e._s(e.user.score))]),e._v(" "),e.isOwner?r("a",{staticClass:"score-log",attrs:{href:"/user/scores",target:"_blank"}},[e._v("积分详情>>")]):e._e()]),e._v(" "),e.isOwner?r("ul",{staticClass:"operations"},[e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2)]):e._e(),e._v(" "),e.isAdmin?r("ul",{staticClass:"operations"},[e.user.forbidden?r("li",[r("i",{staticClass:"iconfont icon-forbidden"}),e._v(" "),r("a",{on:{click:e.removeForbidden}},[e._v(" 取消禁言")])]):r("li",[r("i",{staticClass:"iconfont icon-forbidden"}),e._v(" "),r("a",{on:{click:e.forbidden}},[e._v(" 禁言")])])]):e._e()])])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("i",{staticClass:"iconfont icon-edit"}),this._v(" "),t("a",{attrs:{href:"/user/settings"}},[this._v(" 编辑资料")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("i",{staticClass:"iconfont icon-message"}),this._v(" "),t("a",{attrs:{href:"/user/messages"}},[this._v(" 消息")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("i",{staticClass:"iconfont icon-favorites"}),this._v(" "),t("a",{attrs:{href:"/user/favorites"}},[this._v(" 收藏")])])}],!1,null,"3d739100",null));t.a=f.exports},571:function(e,t,r){"use strict";r.r(t);r(16);var n=r(2),c={middleware:"authenticated",components:{UserCenterSidebar:r(213).a},asyncData:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$axios,n=e.query,t.prev=1,t.next=4,r.get("/api/user/email/verify?token="+n.token);case 4:return t.abrupt("return",{success:!0});case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",{success:!1,message:t.t0.message||""});case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()},computed:{currentUser:function(){return this.$store.state.user.current}}},o=r(29),component=Object(o.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"main"},[r("div",{staticClass:"container main-container is-white left-main"},[r("div",{staticClass:"left-container"},[r("div",{staticClass:"widget"},[r("div",{staticClass:"widget-header"},[e._v("邮箱验证")]),e._v(" "),r("div",{staticClass:"widget-content"},[e.success?r("div",[e._v("\n            恭喜，邮箱验证成功。你的邮箱为："+e._s(e.currentUser.email)+"，"),r("a",{attrs:{href:"/user/settings"}},[e._v("点击前往资料页")])]):r("div",[e._v("\n            邮箱验证失败"),e.message?r("span",{staticClass:"has-text-danger"},[e._v(" 原因："+e._s(e.message))]):e._e(),e._v("，请前往 "),r("a",{attrs:{href:"/user/settings"}},[e._v("编辑资料")]),e._v(" 页面尝试重新发送验证邮件。\n          ")])])])]),e._v(" "),r("user-center-sidebar",{attrs:{user:e.currentUser}})],1)])}),[],!1,null,"bb264aa0",null);t.default=component.exports}}]);
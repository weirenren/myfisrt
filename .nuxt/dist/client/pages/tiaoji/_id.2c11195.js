(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{219:function(t,e,r){t.exports=r.p+"img/net.1e01d6d.png"},347:function(t,e,r){},468:function(t,e,r){"use strict";var o=r(347);r.n(o).a},601:function(t,e,r){"use strict";r.r(e);var o=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"topic-header-left"},[e("a",[e("img",{staticClass:"avatar",attrs:{alt:"90社区",src:r(219)}})])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",[r("tr",[r("th",[r("abbr",{attrs:{title:"Position"}},[t._v("用户")])]),t._v(" "),r("th",[t._v("总分")]),t._v(" "),r("th",[r("abbr",{attrs:{title:"Played"}},[t._v("英语")])]),t._v(" "),r("th",[r("abbr",{attrs:{title:"Won"}},[t._v("政治")])]),t._v(" "),r("th",[r("abbr",{attrs:{title:"Drawn"}},[t._v("科目一")])]),t._v(" "),r("th",[r("abbr",{attrs:{title:"Lost"}},[t._v("科目二")])])])])}],n=(r(49),r(17),r(9),r(30),r(40)),c=(r(16),r(2)),l=(r(199),r(250),{components:{},asyncData:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var r,o,c,l,_,v,d,m,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$axios,o=t.params,c=t.error,e.prev=1,e.next=4,r.get("/api/tiaoji/"+o.id);case 4:l=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),c({statusCode:404,message:"话题不存在"}),e.abrupt("return");case 11:if(l){e.next=14;break}return c({statusCode:404,message:"话题不存在"}),e.abrupt("return");case 14:return e.next=16,r.get("/api/tiaoji/userscores/"+o.id);case 16:return(_=e.sent)&&_.sort((function(a,b){return b.total_score-a.total_score})),e.next=20,Promise.all([r.get("/api/favorite/favorited",{params:{entityType:"tiaojiPost",entityId:l.post_id}})]);case 20:return v=e.sent,d=Object(n.a)(v,1),m=d[0],f=m.favorited,e.abrupt("return",{post:l,userScores:_,favorited:f});case 25:case"end":return e.stop()}}),e,null,[[1,7]])})))()},data:function(){return{href:""}},computed:{isOwner:function(){return this.$store.state.user.current&&this.post}},mounted:function(){this.href=window.location.href},updated:function(){},methods:{loading:function(){},onCopy:function(){this.$toast.success("复制成功！可以粘贴分享啦"),this.loading()},formatText2Html:function(t){var html=t;return html&&(html=(html=html.replace(/ /g,"&nbsp;")).replace(/\n/g,"<br/>")),html},formatMajorsConntent:function(){var t="-";return""!==this.post.major_top_class&&(t=this.post.major_top_class),""!==this.post.major_top_class&&(t+="->"+this.post.major_second_class),""!==this.post.major_top_class&&(t+="->"+this.post.major_third_class),t},shareContent:function(){return this.post.post_title.trim()+"\n  "+this.post.description+"\n ———图片详情请点击链接："+this.href},addFavorite:function(t){var e=this;return Object(c.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,!e.favorited){r.next=8;break}return r.next=4,e.$axios.get("/api/favorite/delete",{params:{entityType:"tiaojiPost",entityId:t}});case 4:e.favorited=!1,e.$toast.success("已取消收藏！"),r.next=12;break;case 8:return r.next=10,e.$axios.get("/api/tiaoji/favorite/"+t);case 10:e.favorited=!0,e.$toast.success("收藏成功");case 12:r.next=18;break;case 14:r.prev=14,r.t0=r.catch(0),console.error(r.t0),e.$toast.error("收藏失败："+(r.t0.message||r.t0));case 18:case"end":return r.stop()}}),r,null,[[0,14]])})))()},share:function(t){this.$toast.success("分享")}},head:function(){return{title:this.$siteTitle(this.post.post_title)}}}),_=(r(468),r(29)),component=Object(_.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("section",{staticClass:"main"},[r("div",{staticClass:"container main-container left-main"},[r("div",{staticClass:"left-container"},[r("div",{ref:"loadingContainer",staticClass:"main-content"},[r("article",{staticClass:"topic-detail topic-wrap",attrs:{itemscope:"",itemtype:"http://schema.org/BlogPosting"}},[r("div",{staticClass:"topic-header"},[t._m(0),t._v(" "),r("div",{staticClass:"topic-header-center"},[r("h1",{staticClass:"topic-title",attrs:{itemprop:"headline"}},[t._v("\n                  "+t._s(t.post.post_title)+"\n                ")]),t._v(" "),r("div",{staticClass:"topic-meta"},[r("span",{staticClass:"meta-item",attrs:{itemprop:"author",itemscope:"",itemtype:"http://schema.org/Person"}}),t._v(" "),r("span",{staticClass:"meta-item"},[r("time",{attrs:{datetime:t._f("formatDate")(t.post.post_datetime,"yyyy-MM-ddTHH:mm:ss"),itemprop:"datePublished"}},[t._v(t._s(t._f("prettyDate")(t.post.post_datetime)))])]),t._v(" "),r("span",{staticClass:"meta-item act"},[r("a",{on:{click:function(e){return t.addFavorite(t.post.post_id)}}},[r("i",{staticClass:"iconfont icon-favorite"}),t._v(" "+t._s(t.favorited?"已收藏":"收藏")+"\n                    ")])]),t._v(" "),r("span",{staticClass:"meta-item act"},[r("a",{directives:[{name:"clipboard",rawName:"v-clipboard:error",arg:"error"},{name:"clipboard",rawName:"v-clipboard:copy",value:t.shareContent(),expression:"shareContent()",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}]},[t._v("\n                          \n                      "),r("i",{staticClass:"iconfont icon-share"}),t._v("  分享\n                    ")])])])])]),t._v(" "),r("div",{staticClass:"tile is-ancestor"},[r("div",{staticClass:"tile is-parent"},[r("div",{staticClass:"tile is-child box"},[r("table",{staticClass:"table"},[r("tbody",[r("tr",[r("th",[t._v("学校：")]),t._v(" "),r("td",[t._v(t._s(t.post.colleage_name))])]),t._v(" "),r("tr",[r("th",[t._v("专业：")]),t._v(" "),r("td",[t._v(t._s(t.formatMajorsConntent()))])]),t._v(" "),r("tr",[r("th",[t._v("年级：")]),t._v(" "),r("td",[t._v(t._s(t.post.grade_level))])]),t._v(" "),r("tr",[r("th",[t._v("招生人数：")]),t._v(" "),r("td",[t._v(t._s(t.post.recruit_num))])]),t._v(" "),r("tr",[r("th",[t._v("联系方式：")]),t._v(" "),r("td",[t._v(t._s(t.post.email)+" "+t._s(t.post.phone_number))])])])])])])]),t._v(" "),r("div",{staticClass:"tile is-ancestor"},[r("div",{staticClass:"tile is-parent"},[r("div",{staticClass:"tile is-child box"},[r("p",{domProps:{innerHTML:t._s(t.formatText2Html(t.post.description))}})])])]),t._v(" "),r("div",{staticClass:"tile is-ancestor"},[r("div",{staticClass:"tile is-parent"},[r("div",{staticClass:"tile is-child box"},[r("table",{staticClass:"table"},[t._m(1),t._v(" "),r("tbody",t._l(t.userScores,(function(e,o){return r("tr",{key:e.user_name,attrs:{index:o}},[r("th",[t._v(t._s(e.user_name))]),t._v(" "),r("td",[t._v(t._s(e.total_score))]),t._v(" "),r("td",[t._v(t._s(e.english_score))]),t._v(" "),r("td",[t._v(t._s(e.politic_score))]),t._v(" "),r("td",[t._v(t._s(e.kemu_one_score))]),t._v(" "),r("td",[t._v(t._s(e.kemu_two_score))])])})),0)])])])]),t._v(" "),r("div",{staticClass:"topic-actions"},[r("div",{staticClass:"action favorite",class:{active:t.favorited},on:{click:function(e){return t.addFavorite(t.post.post_id)}}},[r("i",{staticClass:"iconfont icon-favorite"})]),t._v(" "),r("span",{staticClass:"split"})])])])]),t._v(" "),r("div",{staticClass:"right-container"})])])])}),o,!1,null,"5d7dddf0",null);e.default=component.exports}}]);
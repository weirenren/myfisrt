(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{228:function(t,e,l){t.exports=l.p+"img/net.1e01d6d.png"},282:function(t,e,l){},364:function(t,e,l){"use strict";var o=l(282);l.n(o).a},474:function(t,e,l){"use strict";l.r(e);l(15);var o=l(2),r=(l(8),{layout:"admin",data:function(){return{results:[],listLoading:!1,page:{},filters:{},addForm:{},addFormVisible:!1,addFormRules:{},addLoading:!1,editForm:{},editFormVisible:!1,editFormRules:{},editLoading:!1}},mounted:function(){this.list()},methods:{list:function(){var t=this;t.listLoading=!0;var e=Object.assign(t.filters,{page:t.page.page,limit:t.page.limit});this.$axios.post("/api/admin/link/list",e).then((function(data){t.results=data.results,t.page=data.page})).finally((function(){t.listLoading=!1}))},handlePageChange:function(t){this.page.page=t,this.list()},handleLimitChange:function(t){this.page.limit=t,this.list()},handleAdd:function(){this.addForm={},this.addFormVisible=!0},addSubmit:function(){var t=this;this.$axios.post("/api/admin/link/create",this.addForm).then((function(data){t.$message({message:"提交成功",type:"success"}),t.addFormVisible=!1,t.list()})).catch((function(e){t.$notify.error({title:"错误",message:e.message})}))},detect:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.addForm.url){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,t.$confirm("确定采集吗，采集之后将覆盖现有内容?","提示",{type:"warning"});case 5:if(!e.sent){e.next=11;break}return e.next=9,t.$axios.get("/api/admin/link/detect",{url:t.addForm.url});case 9:(data=e.sent)&&(t.addForm.title=data.title,t.addForm.summary=data.description);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),t.$notify.error({title:"错误",message:e.t0.message||e.t0});case 16:case"end":return e.stop()}}),e,null,[[2,13]])})))()},handleEdit:function(t,e){var l=this;this.$axios.get("/api/admin/link/".concat(e.id)).then((function(data){l.editForm=Object.assign({},data),l.editFormVisible=!0})).catch((function(t){l.$notify.error({title:"错误",message:t.message})}))},editSubmit:function(){var t=this;this.$axios.post("/api/admin/link/update",t.editForm).then((function(data){t.list(),t.editFormVisible=!1})).catch((function(e){t.$notify.error({title:"错误",message:e.message})}))}}}),n=(l(364),l(49)),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"page-container"},[o("div",{staticClass:"toolbar"},[o("el-form",{attrs:{inline:!0,model:t.filters}},[o("el-form-item",[o("el-input",{attrs:{placeholder:"标题"},model:{value:t.filters.title,callback:function(e){t.$set(t.filters,"title",e)},expression:"filters.title"}})],1),t._v(" "),o("el-form-item",[o("el-input",{attrs:{placeholder:"链接"},model:{value:t.filters.url,callback:function(e){t.$set(t.filters,"url",e)},expression:"filters.url"}})],1),t._v(" "),o("el-form-item",[o("el-select",{attrs:{clearable:"",placeholder:"请选择状态"},on:{change:t.list},model:{value:t.filters.status,callback:function(e){t.$set(t.filters,"status",e)},expression:"filters.status"}},[o("el-option",{attrs:{label:"正常",value:"0"}}),t._v(" "),o("el-option",{attrs:{label:"删除",value:"1"}})],1)],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.list}},[t._v("查询")])],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("新增")])],1)],1)],1),t._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.results,"highlight-current-row":"",stripe:""}},[o("el-table-column",{attrs:{prop:"id",label:"编号",width:"100"}}),t._v(" "),o("el-table-column",{attrs:{prop:"title",label:"标题"}}),t._v(" "),o("el-table-column",{attrs:{prop:"url",label:"链接"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("a",{attrs:{href:e.row.url,target:"_blank"}},[t._v(t._s(e.row.url))])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"logo",label:"Logo",width:"60"},scopedSlots:t._u([{key:"default",fn:function(t){return[t.row.logo?o("img",{staticClass:"link-logo",attrs:{src:t.row.logo}}):o("img",{staticClass:"link-logo",attrs:{src:l(228)}})]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"summary",label:"描述"}}),t._v(" "),o("el-table-column",{attrs:{prop:"status",label:"状态",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0===e.row.status?"正常":"删除")+"\n      ")]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"createTime",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatDate")(e.row.createTime))+"\n      ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"small"},on:{click:function(l){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑\n        ")])]}}])})],1),t._v(" "),o("div",{staticClass:"pagebar"},[o("el-pagination",{attrs:{"page-sizes":[20,50,100,300],"current-page":t.page.page,"page-size":t.page.limit,total:t.page.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.handlePageChange,"size-change":t.handleLimitChange}})],1),t._v(" "),o("el-dialog",{attrs:{visible:t.addFormVisible,"close-on-click-modal":!1,title:"新增"},on:{"update:visible":function(e){t.addFormVisible=e}}},[o("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"链接"}},[o("el-input",{staticStyle:{width:"80%"},model:{value:t.addForm.url,callback:function(e){t.$set(t.addForm,"url",e)},expression:"addForm.url"}}),t._v(" \n        "),o("el-button",{attrs:{type:"primary"},on:{click:t.detect}},[t._v("Detect")])],1),t._v(" "),o("el-form-item",{attrs:{label:"标题"}},[o("el-input",{model:{value:t.addForm.title,callback:function(e){t.$set(t.addForm,"title",e)},expression:"addForm.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"描述"}},[o("el-input",{attrs:{autosize:{minRows:2,maxRows:4}},model:{value:t.addForm.summary,callback:function(e){t.$set(t.addForm,"summary",e)},expression:"addForm.summary"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"Logo"}},[o("el-input",{model:{value:t.addForm.logo,callback:function(e){t.$set(t.addForm,"logo",e)},expression:"addForm.logo"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(e){t.addFormVisible=!1}}},[t._v("取消")]),t._v(" "),o("el-button",{attrs:{loading:t.addLoading,type:"primary"},nativeOn:{click:function(e){return t.addSubmit(e)}}},[t._v("提交\n      ")])],1)],1),t._v(" "),o("el-dialog",{attrs:{visible:t.editFormVisible,"close-on-click-modal":!1,title:"编辑"},on:{"update:visible":function(e){t.editFormVisible=e}}},[o("el-form",{ref:"editForm",attrs:{model:t.editForm,rules:t.editFormRules,"label-width":"80px"}},[o("el-input",{attrs:{type:"hidden"},model:{value:t.editForm.id,callback:function(e){t.$set(t.editForm,"id",e)},expression:"editForm.id"}}),t._v(" "),o("el-form-item",{attrs:{label:"链接"}},[o("el-input",{model:{value:t.editForm.url,callback:function(e){t.$set(t.editForm,"url",e)},expression:"editForm.url"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"标题"}},[o("el-input",{model:{value:t.editForm.title,callback:function(e){t.$set(t.editForm,"title",e)},expression:"editForm.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"描述"}},[o("el-input",{attrs:{autosize:{minRows:2,maxRows:4}},model:{value:t.editForm.summary,callback:function(e){t.$set(t.editForm,"summary",e)},expression:"editForm.summary"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"Logo"}},[o("el-input",{model:{value:t.editForm.logo,callback:function(e){t.$set(t.editForm,"logo",e)},expression:"editForm.logo"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"状态",prop:"status"}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.editForm.status,callback:function(e){t.$set(t.editForm,"status",e)},expression:"editForm.status"}},[o("el-option",{key:0,attrs:{value:0,label:"正常"}}),t._v(" "),o("el-option",{key:1,attrs:{value:1,label:"删除"}})],1)],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(e){t.editFormVisible=!1}}},[t._v("取消")]),t._v(" "),o("el-button",{attrs:{loading:t.editLoading,type:"primary"},nativeOn:{click:function(e){return t.editSubmit(e)}}},[t._v("提交\n      ")])],1)],1)],1)}),[],!1,null,"77d83ef1",null);e.default=component.exports}}]);
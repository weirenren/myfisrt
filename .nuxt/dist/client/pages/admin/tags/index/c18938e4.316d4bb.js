(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{556:function(t,e,l){"use strict";l.r(e);l(9);var o={layout:"admin",data:function(){return{results:[],listLoading:!1,page:{},filters:{},selectedRows:[],addForm:{name:"",description:"",status:"",createTime:""},addFormVisible:!1,addLoading:!1,editForm:{id:"",name:"",description:"",status:"",createTime:""},editFormVisible:!1,editLoading:!1}},mounted:function(){this.list()},methods:{list:function(){var t=this;t.listLoading=!0;var e=Object.assign(t.filters,{page:t.page.page,limit:t.page.limit});this.$axios.post("/api/admin/tag/list",e).then((function(data){t.results=data.results,t.page=data.page})).finally((function(){t.listLoading=!1}))},handlePageChange:function(t){this.page.page=t,this.list()},handleLimitChange:function(t){this.page.limit=t,this.list()},handleSelectionChange:function(t){this.selectedRows=t},handleAdd:function(){this.addForm={name:"",description:""},this.addFormVisible=!0},addSubmit:function(){var t=this;this.$axios.post("/api/admin/tag/create",this.addForm).then((function(data){t.$message({message:"提交成功",type:"success"}),t.addFormVisible=!1,t.list()})).catch((function(e){t.$notify.error({title:"错误",message:e.message})}))},handleEdit:function(t,e){var l=this;this.$axios.get("/api/admin/tag/"+e.id).then((function(data){l.editForm=Object.assign({},data),l.editFormVisible=!0})).catch((function(t){l.$notify.error({title:"错误",message:t.message})}))},editSubmit:function(){var t=this;this.$axios.post("/api/admin/tag/update",t.editForm).then((function(data){t.list(),t.editFormVisible=!1})).catch((function(e){t.$notify.error({title:"错误",message:e.message})}))}}},n=l(29),component=Object(n.a)(o,(function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("section",{staticClass:"page-container"},[l("div",{staticClass:"toolbar"},[l("el-form",{attrs:{inline:!0,model:t.filters}},[l("el-form-item",[l("el-input",{attrs:{placeholder:"编号"},model:{value:t.filters.id,callback:function(e){t.$set(t.filters,"id",e)},expression:"filters.id"}})],1),t._v(" "),l("el-form-item",[l("el-input",{attrs:{placeholder:"名称"},model:{value:t.filters.name,callback:function(e){t.$set(t.filters,"name",e)},expression:"filters.name"}})],1),t._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:t.list}},[t._v("查询")])],1),t._v(" "),l("el-form-item",[l("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("新增")])],1)],1)],1),t._v(" "),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.results,"highlight-current-row":"",border:""},on:{"selection-change":t.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),l("el-table-column",{attrs:{prop:"id",label:"编号"}}),t._v(" "),l("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),l("el-table-column",{attrs:{prop:"description",label:"描述"}}),t._v(" "),l("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(0===e.row.status?"启用":"禁用"))]}}])}),t._v(" "),l("el-table-column",{attrs:{prop:"createTime",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("formatDate")(e.row.createTime)))]}}])}),t._v(" "),l("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{size:"small"},on:{click:function(l){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")])]}}])})],1),t._v(" "),l("div",{staticClass:"pagebar"},[l("el-pagination",{attrs:{"page-sizes":[20,50,100,300],"current-page":t.page.page,"page-size":t.page.limit,total:t.page.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.handlePageChange,"size-change":t.handleLimitChange}})],1),t._v(" "),l("el-dialog",{attrs:{visible:t.addFormVisible,"close-on-click-modal":!1,title:"新增"},on:{"update:visible":function(e){t.addFormVisible=e}}},[l("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"名称"}},[l("el-input",{model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"描述",prop:"description"}},[l("el-input",{attrs:{type:"textarea","auto-complete":"off"},model:{value:t.addForm.description,callback:function(e){t.$set(t.addForm,"description",e)},expression:"addForm.description"}})],1)],1),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{nativeOn:{click:function(e){t.addFormVisible=!1}}},[t._v("取消")]),t._v(" "),l("el-button",{attrs:{loading:t.addLoading,type:"primary"},nativeOn:{click:function(e){return t.addSubmit(e)}}},[t._v("提交")])],1)],1),t._v(" "),l("el-dialog",{attrs:{visible:t.editFormVisible,"close-on-click-modal":!1,title:"编辑"},on:{"update:visible":function(e){t.editFormVisible=e}}},[l("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"80px"}},[l("el-input",{attrs:{type:"hidden"},model:{value:t.editForm.id,callback:function(e){t.$set(t.editForm,"id",e)},expression:"editForm.id"}}),t._v(" "),l("el-form-item",{attrs:{label:"名称"}},[l("el-input",{model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"描述",prop:"description"}},[l("el-input",{attrs:{type:"textarea","auto-complete":"off"},model:{value:t.editForm.description,callback:function(e){t.$set(t.editForm,"description",e)},expression:"editForm.description"}})],1),t._v(" "),l("el-form-item",{attrs:{label:"状态"}},[l("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.editForm.status,callback:function(e){t.$set(t.editForm,"status",e)},expression:"editForm.status"}},[l("el-option",{attrs:{value:0,label:"启用"}}),t._v(" "),l("el-option",{attrs:{value:1,label:"禁用"}})],1)],1)],1),t._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{nativeOn:{click:function(e){t.editFormVisible=!1}}},[t._v("取消")]),t._v(" "),l("el-button",{attrs:{loading:t.editLoading,type:"primary"},nativeOn:{click:function(e){return t.editSubmit(e)}}},[t._v("提交")])],1)],1)],1)}),[],!1,null,"3e453922",null);e.default=component.exports}}]);
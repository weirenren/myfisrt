/*! For license information please see ../../../LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{209:function(t,e,n){},217:function(t,e,n){"use strict";var r=n(209);n.n(r).a},218:function(t,e,n){"use strict";n(137);var r={props:{currentNodeId:{type:Number,default:1},nodes:{type:Array,default:function(){return[]}}},mounted:function(){}},o=(n(217),n(28)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"topics-nav"},[n("ul",{staticClass:"topics-nav-list"},[n("li",{staticClass:"topics-nav-item",class:{active:0===t.currentNodeId}},[n("a",{attrs:{href:"/topics/node/newest"}},[t._v("最新")])]),t._v(" "),n("li",{staticClass:"topics-nav-item",class:{active:-1===t.currentNodeId}},[n("a",{attrs:{href:"/topics/node/recommend"}},[t._v("推荐")])]),t._v(" "),t._l(t.nodes,(function(e){return n("li",{key:e.nodeId,staticClass:"topics-nav-item",class:{active:t.currentNodeId==e.nodeId}},[1!==e.nodeId&&2!==e.nodeId?n("div",[n("a",{attrs:{href:"/topics/node/"+e.nodeId}},[t._v(t._s(e.name))])]):t._e()])}))],2)])}),[],!1,null,"1f0f6714",null);e.a=component.exports},279:function(t,e,n){"use strict";e.parse=function(t,e){if("string"!=typeof t)throw new TypeError("argument str must be a string");for(var n={},o=e||{},l=t.split(c),d=o.decode||r,i=0;i<l.length;i++){var f=l[i],m=f.indexOf("=");if(!(m<0)){var v=f.substr(0,m).trim(),C=f.substr(++m,f.length).trim();'"'==C[0]&&(C=C.slice(1,-1)),null==n[v]&&(n[v]=h(C,d))}}return n},e.serialize=function(t,e,n){var r=n||{},c=r.encode||o;if("function"!=typeof c)throw new TypeError("option encode is invalid");if(!l.test(t))throw new TypeError("argument name is invalid");var h=c(e);if(h&&!l.test(h))throw new TypeError("argument val is invalid");var d=t+"="+h;if(null!=r.maxAge){var f=r.maxAge-0;if(isNaN(f)||!isFinite(f))throw new TypeError("option maxAge is invalid");d+="; Max-Age="+Math.floor(f)}if(r.domain){if(!l.test(r.domain))throw new TypeError("option domain is invalid");d+="; Domain="+r.domain}if(r.path){if(!l.test(r.path))throw new TypeError("option path is invalid");d+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");d+="; Expires="+r.expires.toUTCString()}r.httpOnly&&(d+="; HttpOnly");r.secure&&(d+="; Secure");if(r.sameSite){switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:d+="; SameSite=Strict";break;case"lax":d+="; SameSite=Lax";break;case"strict":d+="; SameSite=Strict";break;case"none":d+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return d};var r=decodeURIComponent,o=encodeURIComponent,c=/; */,l=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function h(t,e){try{return e(t)}catch(e){return t}}},284:function(t,e,n){},285:function(t,e,n){},286:function(t,e,n){},368:function(t,e,n){"use strict";var r=n(284);n.n(r).a},369:function(t,e,n){"use strict";var r=n(285);n.n(r).a},370:function(t,e,n){"use strict";var r=n(286);n.n(r).a},471:function(t,e,n){"use strict";n.r(e);n(16),n(9),n(29);var r=n(40),o=(n(15),n(2)),c=n(235),l=n(238),h=n(239),d=n(279),f=n.n(d),m=n(216),v=n(220),C=n(226),P=(n(218),n(219)),y=n(227),w={props:{page:{type:Object,default:function(){return{page:1,total:0,limit:20}},required:!0},urlPrefix:{type:String,default:"/",required:!0},parmsContext:{type:Object,default:function(){return{}},required:!1},onPageChanged:{type:Function,required:!0}},computed:{pageList:function(){var t=this.page.page-2,e=this.page.page+2,n=this.getTotalPage();if(t<=0){for(var r=[],i=1;i<=5&&i<=n;i++)r.push(i);return r}if(e>n){for(var o=[],c=n-5<=0?1:n-5;c>0&&c<=n;c++)o.push(c);return o}return[this.page.page-2,this.page.page-1,this.page.page,this.page.page+1,this.page.page+2]},previousPageUrl:function(){return this.getPreviousPageUrl()},nextPageUrl:function(){return this.getNextPageUrl()}},mounted:function(){console.log("Page2")},methods:{getNextPageUrl:function(){var t=this.page.page+1;return t>this.getTotalPage()?"":this.getPageUrl(t)},clickNextPage:function(){var t=this.page.page+1;t>this.getTotalPage()||this.clickPage(t)},clickPreviousPage:function(){var t=this.page.page-1;t<=0||this.clickPage(t)},getPreviousPageUrl:function(){var t=this.page.page-1;return t<=0?"":this.getPageUrl(t)},getPageUrl:function(t){return this.page.page===t?"javascript:void(0)":this.urlPrefix+t},clickPage:function(t){this.page.page===t||this.onPageChanged&&this.onPageChanged(this.urlPrefix,t,this.parmsContext)},getTotalPage:function(){return this.page.total%this.page.limit>0?parseInt(this.page.total/this.page.limit)+1:this.page.total/this.page.limit}}},x=(n(368),n(28)),_=Object(x.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.page.total>0?n("nav",{staticClass:"pagination is-small",attrs:{role:"navigation","aria-label":"pagination"}},[t.previousPageUrl?n("a",{staticClass:"pagination-previous",on:{click:t.clickPreviousPage}},[t._v("上一页")]):n("a",{staticClass:"pagination-previous",attrs:{disabled:""}},[t._v("上一页")]),t._v(" "),t.nextPageUrl?n("a",{staticClass:"pagination-previous",on:{click:t.clickNextPage}},[t._v("下一页")]):n("a",{staticClass:"pagination-previous",attrs:{disabled:""}},[t._v("下一页")]),t._v(" "),n("ul",{staticClass:"pagination-list"},t._l(t.pageList,(function(p){return n("li",{key:p},[n("a",{staticClass:"pagination-link",class:{"is-current":p==t.page.page},on:{click:function(e){return t.clickPage(p)}}},[t._v(t._s(p))])])})),0)]):t._e()}),[],!1,null,"24fbcf78",null).exports,k={components:{},props:{onTagChanged:{type:Function,required:!0}},data:function(){return{metro:["不限","1号线","2号线","3号线","4号线","5号线","6号线","7号线","8号线","9号线","10号线","13号线","14号线","15号线","八通线","亦庄线","昌平线","房山线","机场线","16号线"],tabIndex:0,metroIndex:0,isCollapsed:!0}},watch:{isCollapsed:function(t){this.onCollapsed&&this.onCollapsed(t)}},mounted:function(){this.id},methods:{metroIndexChanged:function(t){if(this.metroIndex=t,this.onTagChanged){var e=this.metro[t];this.onTagChanged(e)}},tabChanged:function(t){this.tabIndex=t},getCollapseState:function(){return this.isCollapsed},saveCollapsedState:function(t){console.log(t);this.getCollapseState()}}},T=(n(369),Object(x.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"metro-body"},[n("div",{staticClass:"tabs is-small is-toggle metro-tabs"},[n("ul",[n("li",{class:0===t.tabIndex?"is-active":""},[n("a",{on:{click:function(e){return t.tabChanged(0)}}},[n("span",[t._v("地铁线路")])])])])]),t._v(" "),n("div",{staticClass:"metro-action-content"},[n("div",{staticClass:"metro-label"},[t._v("\n      地铁\n    ")]),t._v(" "),n("div",t._l(t.metro,(function(e,r){return n("a",{key:e,class:r===t.metroIndex?"metro-a":"",attrs:{index:r},on:{click:function(e){return t.metroIndexChanged(r)}}},[t._v("\n        "+t._s(e))])})),0)])])}),[],!1,null,"357ce888",null).exports),S=n(208);c.c.add(h.b,h.a);var A={components:{FontAwesomeIcon:l.a,SiteNotice:m.a,ScoreRank:v.a,FriendLinks:C.a,TopicList:P.a,TweetsWidget:y.a,Pagination2:_,MetroSelector:T},asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,c,l,h,d,m,v,C,P,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$axios,o=t.query,c=t.req,l="北京",c&&void 0!==c.headers&&(h=f.a.parse(c.headers.cookie||""))&&""!==h&&(l=h.city),void 0===l&&(l="北京"),e.prev=4,e.next=7,Promise.all([n.get("/api/topic/node/topics",{params:{page:o.p||1,city:l,nodeId:2}}),n.get("/api/user/score/rank"),n.get("/api/link/toplinks"),n.get("/api/tweet/newest")]);case 7:return d=e.sent,m=Object(r.a)(d,4),v=m[0],C=m[1],P=m[2],y=m[3],e.abrupt("return",{topicsPage:v,scoreRank:C,links:P,newestTweets:y});case 16:e.prev=16,e.t0=e.catch(4),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[4,16]])})))()},data:function(){return{searchTerms:"",searchAction:!1,rentPagingAction:"/api/topic/node/topics",tagPagingAction:"/api/topic/tag/topiclist",pageAction:"",pageParmsContext:{}}},mounted:function(){"武汉"===S.a.getCity()&&(this.jumpCityUrl="https://sharevideo.cn/rent/6183"),"北京"===S.a.getCity()&&(this.jumpCityUrl="https://sharevideo.cn/rent/6346"),"杭州"===S.a.getCity()&&(this.bannerImgurl="https://upload-images.jianshu.io/upload_images/17856673-382c2bfa30d1d02f.JPG",this.jumpCityUrl="https://sharevideo.cn/rent/6183"),"上海"===S.a.getCity()&&(this.jumpCityUrl="https://sharevideo.cn/rent/6347"),this.pageAction=this.rentPagingAction},methods:{onPageChanged:function(t,e,n){var r={};t===this.rentPagingAction&&(r=this.getRentParms(e)),t===this.tagPagingAction&&(r={page:e,city:S.a.getCity(),tagName:n.tagName}),this.changePageTopics(t,r,null)},getRentParms:function(t){return{page:t||1,city:S.a.getCity(),nodeId:2}},onTagChangedCallBack:function(t){var e=this;"不限"===t?(this.pageAction=this.rentPagingAction,this.changePageTopics(this.rentPagingAction,this.getRentParms(1),(function(){e.refreshPagination()}))):this.tagSearchTopics(t)},onCollapseBack:function(t){},jumpCityWechatUrl:function(){window.location.href=this.jumpCityUrl},jumpUrl:function(t){t&&window.open(t)},twitterCreated:function(data){this.topicsPage&&(this.topicsPage.results?this.topicsPage.results.unshift(data):this.topicsPage.results=[data])},changePageTopics:function(t,e,n){var r=this;this.$axios.get(t,{params:e}).then((function(t){r.topicsPage.results=t.results,r.topicsPage.page=t.page,n&&n()})).catch((function(t){console.log("tagSearchTopics error:"+JSON.stringify(t))}))},refreshPagination:function(){var t=this,e=this.searchAction;this.searchAction=!this.searchAction,this.$nextTick((function(){t.searchAction=e}))},tagSearchTopics:function(t){var e=this;this.pageAction=this.tagPagingAction,this.pageParmsContext={page:1,tagName:t},this.changePageTopics(this.tagPagingAction,this.pageParmsContext,(function(){e.refreshPagination()}))},search:function(){var t=this;S.a.isEmpty(this.searchTerms.trim())?this.$toast.error("请输入租房地点"):this.$axios.get("/api/topic/search",{params:{terms:this.searchTerms,city:S.a.getCity()}}).then((function(e){t.topicsPage.results=e,t.searchAction=!0})).catch((function(t){console.log("search error:"+JSON.stringify(t))}))}},head:function(){return{title:this.$siteTitle("90社区-出租/转租/合租找室友"),meta:[{hid:"description",name:"description",content:this.$siteDescription()},{hid:"keywords",name:"keywords",content:this.$siteKeywords()}]}}},I=(n(370),Object(x.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"main"},[n("div",{staticClass:"container main-container left-main"},[n("client-only",[n("div",{staticClass:"left-container"},[n("div",{staticClass:"main-content"},[n("div",{staticClass:"nav-tip"},[n("a",{staticClass:"button is-small nav-btn",on:{click:function(e){return t.jumpUrl("https://www.jianshu.com/p/1850dba0604f")}}},[t._v("\n              找房攻略\n            ")]),t._v(" "),n("a",{staticClass:"button is-small nav-btn",on:{click:function(e){return t.jumpCityWechatUrl()}}},[t._v("\n              租房群部落\n            ")])]),t._v(" "),n("div",{staticClass:"field is-grouped search-box"},[n("p",{staticClass:"control is-expanded"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerms,expression:"searchTerms"}],staticClass:"input",staticStyle:{"font-size":"small"},attrs:{type:"text",placeholder:"西二旗 回龙观（空格隔开，多关键词匹配)"},domProps:{value:t.searchTerms},on:{input:function(e){e.target.composing||(t.searchTerms=e.target.value)}}})]),t._v(" "),n("p",{staticClass:"control"},[n("button",{staticClass:"button is-primary is-small is-active",on:{click:t.search}},[t._v("\n                搜索\n              ")])])]),t._v(" "),n("metro-selector",{attrs:{"on-tag-changed":t.onTagChangedCallBack}}),t._v(" "),n("topic-list",{attrs:{topics:t.topicsPage.results,"edit-path":"rent","show-ad":!0,"open-new-page":!0}}),t._v(" "),t.searchAction?t._e():n("pagination2",{attrs:{page:t.topicsPage.page,"url-prefix":t.pageAction,"parms-context":t.pageParmsContext,"on-page-changed":t.onPageChanged}}),t._v(" "),n("back-to-top",{attrs:{text:"Top",visibleoffset:"500"}},[n("button",{staticClass:"btn btn-to-top",attrs:{type:"button"}},[n("font-awesome-icon",{attrs:{icon:"angle-up"}})],1)])],1)]),t._v(" "),n("div",{staticClass:"right-container"},[n("site-notice"),t._v(" "),n("tweets-widget",{attrs:{tweets:t.newestTweets}}),t._v(" "),n("score-rank",{attrs:{"score-rank":t.scoreRank}}),t._v(" "),n("friend-links",{attrs:{links:t.links}})],1)])],1)])}),[],!1,null,"2f59e26c",null));e.default=I.exports}}]);